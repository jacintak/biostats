<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Statistical modelling 3: Evaluating linear models &amp; GLMS</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="../../../jacintak.github.io/styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 66px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h2 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h3 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h4 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h5 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h6 {
  padding-top: 71px;
  margin-top: -71px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Jacinta's GitHub</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Mechanistic models of ectotherm development
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://jacintak.github.io/model-about.html">About</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/model-pipeline.html">Pipeline</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/model-resources.html">Resources</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Teaching intro statistics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="r-exams-guide.html">Quick guide to R/exams</a>
    </li>
    <li>
      <a href="biostats-GLM1.html">Lecture 1: Simple linear models</a>
    </li>
    <li>
      <a href="biostats-GLM2.html">Lecture 2: Multiple regression</a>
    </li>
    <li>
      <a href="biostats-GLM3.html">Lecture 3: Evaluating models</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    colRoz
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://jacintak.github.io/colRoz/index.html">Quick guide to colRoz</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/colRoz/warramaba-palette.html">Warramaba</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/colRoz/lizards-palette.html">Lizards</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/colRoz/landscapes-palette.html">Landscapes</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/colRoz/birds-palette.html">Birds</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/colRoz/frogs-palette.html">Frogs</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/colRoz/snakes-palette.html">Snakes</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/colRoz/plants-palette.html">Plants</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/colRoz/fish-palette.html">Fish</a>
    </li>
    <li>
      <a href="https://jacintak.github.io/colRoz/inverts-palette.html">Inverts</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jacintak">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Statistical modelling 3: Evaluating linear models &amp; GLMS</h1>
<h4 class="date">08-Nov-2020</h4>

</div>


<hr />
<div id="overall-lecture-aims" class="section level1">
<h1><span class="header-section-number">1</span> Overall lecture aims</h1>
<ul>
<li>Identify the structure of general linear models</li>
<li>Describe how linear models are parametrized</li>
<li>Understand how to use linear models</li>
<li>Understand how to interpret and evaluate linear models</li>
</ul>
<div id="other-resources" class="section level2">
<h2><span class="header-section-number">1.1</span> Other resources</h2>
<ul>
<li>Seeing Theory. Chapter 6. <a href="https://seeing-theory.brown.edu/regression-analysis/index.html" class="uri">https://seeing-theory.brown.edu/regression-analysis/index.html</a></li>
<li>Statistics: an introduction using R. Michael J. Crawley. Wiley Press. Chapters 7 - 11.</li>
<li>Experimental Design and Data Analysis for Biologists. Gerry P. Quinn &amp; Michael J. Keough. Cambridge Press. Chapters 5, 6, 8, 12.</li>
<li><a href="https://learningstatisticswithr.com/book/index.html" class="uri">https://learningstatisticswithr.com/book/index.html</a></li>
<li><a href="http://mfviz.com/hierarchical-models/">An interactive visual explanation of hierarchical Models</a></li>
</ul>
</div>
<div id="by-the-end-of-this-lecture-you-should" class="section level2">
<h2><span class="header-section-number">1.2</span> By the end of this lecture you should:</h2>
<ul>
<li>Know how the coefficient of determination is calculated and its interpretation</li>
<li>Understand the assumptions of linear regression</li>
<li>Be able to evaluate the appropriateness of a linear model to data based on residual plots</li>
<li>Be able to identify generalised linear models appropriate for data</li>
</ul>
<hr />
</div>
</div>
<div id="by-now-you-should-be-comfortable-with-building-and-interpreting-basic-linear-models-in-r" class="section level1">
<h1><span class="header-section-number">2</span> By now you should be comfortable with building and interpreting basic linear models in R</h1>
<blockquote>
<p>but how do we know whether our model is a “good” one?</p>
</blockquote>
<p>We need to evaluate our model. There are a few things we should consider:</p>
<ol style="list-style-type: decimal">
<li>How much variation in the data is explained by the model?</li>
<li>Are linear models appropriate for our hypotheses?</li>
</ol>
<hr />
</div>
<div id="what-does-a-linear-model-tell-us" class="section level1">
<h1><span class="header-section-number">3</span> What does a linear model tell us?</h1>
<ol style="list-style-type: decimal">
<li>What will a new value of Y be, given a new value of X?</li>
<li>Does the population slope <span class="math inline">\(\beta_1\)</span> differ to 0?</li>
<li><strong>How much variation in Y can be explained its linear relationship with X?</strong></li>
</ol>
<ul>
<li>Coefficient of determination (<span class="math inline">\(R^2\)</span>)</li>
<li>Partitioning variance (F ratio)</li>
</ul>
</div>
<div id="how-much-variation-in-y-can-be-explained-its-linear-relationship-with-x" class="section level1">
<h1><span class="header-section-number">4</span> How much variation in Y can be explained its linear relationship with X?</h1>
<p><span class="math display">\[ \frac{Var_{\text{explained by the line}}}{Var_{\text{not explained by the line}}} = Ratio\]</span>
Interpreting ratios:<br />
Ratio &gt; 1 = Line explains more than residual<br />
Ratio ≤ 1 = Line explains very little (null hypothesis)</p>
<blockquote>
<p>We need to know the total amount of variation and all possible sources of variation (like the F-ratio &amp; ANOVA)</p>
</blockquote>
<div id="what-is-or-isnt-explained-by-the-line" class="section level2">
<h2><span class="header-section-number">4.1</span> What is or isn’t explained by the line?</h2>
<div id="isnt-sum-of-squares-of-the-error-ssy" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Isn’t: Sum of Squares of the Error (SSY)</h3>
<p>The bit not explained by the null (total variation in the data). Remember, the null is <span class="math inline">\(\bar{y}\)</span> = the mean of Y.</p>
<p><span class="math display">\[SSY = y_i - \bar{y}\]</span></p>
<div class="figure" style="text-align: center"><span id="fig:SSY"></span>
<img src="biostats-GLM3_files/figure-html/SSY-1.png" alt="Black line is the mean of Y. Blue lines are the difference between the mean and a single observation = SSY" width="500" />
<p class="caption">
Figure 4.1: Black line is the mean of Y. Blue lines are the difference between the mean and a single observation = SSY
</p>
</div>
</div>
<div id="isnt-sum-of-squares-of-the-residual-sse" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Isn’t: Sum of Squares of the Residual (SSE)</h3>
<p>The bit not explained by the line</p>
<p><span class="math display">\[SSE = y_i - \hat{y_i}\]</span></p>
<div class="figure" style="text-align: center"><span id="fig:SSE"></span>
<img src="biostats-GLM3_files/figure-html/SSE-1.png" alt="Residuals (blue lines) are the difference between the data point and the predicted line (black line)" width="500" />
<p class="caption">
Figure 4.2: Residuals (blue lines) are the difference between the data point and the predicted line (black line)
</p>
</div>
</div>
<div id="isnt-sum-of-squares-of-the-regression-ssr" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Isn’t: Sum of Squares of the Regression (SSR)</h3>
<p>How well the line estimates the mean of Y</p>
<p><span class="math display">\[SSR = \hat{y_i} - \bar{y}\]</span></p>
<div class="figure" style="text-align: center"><span id="fig:SSR"></span>
<img src="biostats-GLM3_files/figure-html/SSR-1.png" alt="Residuals (blue lines) are the difference between the null hypothesis (mean of observations, dashed lines) and the predicted line (black line)" width="500" />
<p class="caption">
Figure 4.3: Residuals (blue lines) are the difference between the null hypothesis (mean of observations, dashed lines) and the predicted line (black line)
</p>
</div>
<blockquote>
<p>Notice that since SSY is all variation in the data:<br />
SSY = SSE + SSR</p>
</blockquote>
</div>
</div>
</div>
<div id="so-which-bits-do-we-use-to-evaluate-model-fit" class="section level1">
<h1><span class="header-section-number">5</span> So which bits do we use to evaluate model “fit”?</h1>
<p><span class="math display">\[ \frac{Var_{\text{explained by the line}}}{Var_{\text{not explained by the line}}} = Ratio\]</span>
We want the number above the line (nominator) to be larger than the number below the line (denominator), otherwise we cannot be confident that our results are different to randomly generated numbers.</p>
<p>Interpreting ratios:<br />
Ratio &gt; 1 = Line explains more than residual<br />
Ratio ≤ 1 = Line explains very little (null hypothesis)</p>
<p>In other words, we want to know how much varaition is captured by the model relative to the total variation in our data.</p>
<p>What is the error that tells us how much varaition the line is (H1) explaining relative to our null hypothesis (H0)?</p>
<pre class="r fold-hide"><code>SSR - Sum of squares of the regression.</code></pre>
<p>What is the error that tells us the total variation in our data?</p>
<pre class="r fold-hide"><code>SSY - Sum of squares of the error. Sometimes called SST - total sum of squares</code></pre>
<p>So we can evaluate how much varaition the model explains by:</p>
<p><span class="math display">\[\frac{SSR}{SSY} = R^2\]</span></p>
<p>Why can’t we use SSE as the denominator?</p>
<pre class="r fold-hide"><code>SSE depends on the total variation of Y. We could have more variation simply by having more data but the ratio values are the same. So using sum of squares does not tell us about how much variation is explained by our model in a way that is unbiased. </code></pre>
</div>
<div id="coefficient-of-determination-r2" class="section level1">
<h1><span class="header-section-number">6</span> Coefficient of determination <span class="math inline">\(R^2\)</span></h1>
<blockquote>
<p>This is the proportion of variation that your model (your line) explains</p>
</blockquote>
<p>1 = no deviance from line (good)<br />
0 = strong deviance from line (not good)</p>
<p>It is related to correlation coefficients (r). Basically, <span class="math inline">\(R^2 = r^2\)</span></p>
<div class="figure" style="text-align: center"><span id="fig:fit"></span>
<img src="biostats-GLM3_files/figure-html/fit-1.png" alt="Which fits better?" width="300" /><img src="biostats-GLM3_files/figure-html/fit-2.png" alt="Which fits better?" width="300" />
<p class="caption">
Figure 6.1: Which fits better?
</p>
</div>
<p>R will calculate <span class="math inline">\(R^2\)</span> for you. Going back the tree height and girth example, the <span class="math inline">\(R^2\)</span> is 0.27 (Multiple R-squared).</p>
<pre><code>
Call:
lm(formula = Height ~ Girth, data = trees)

Residuals:
     Min       1Q   Median       3Q      Max 
-12.5816  -2.7686   0.3163   2.4728   9.9456 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  62.0313     4.3833  14.152 1.49e-14 ***
Girth         1.0544     0.3222   3.272  0.00276 ** 
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 5.538 on 29 degrees of freedom
Multiple R-squared:  0.2697,    Adjusted R-squared:  0.2445 
F-statistic: 10.71 on 1 and 29 DF,  p-value: 0.002758</code></pre>
<blockquote>
<p>Conclusion: the model (your fitted line) explains 27 % of total variation in data</p>
</blockquote>
<p><em>But…</em></p>
<ul>
<li>Biological data is messy, thus low <span class="math inline">\(R^2\)</span> may be biologically acceptable</li>
<li>Low <span class="math inline">\(R^2\)</span> does not always mean a bad model</li>
<li>Consider multiple regression to explain more variance
<ul>
<li>but adding more parameters is not always better. Why?</li>
</ul></li>
</ul>
<hr />
</div>
<div id="but-there-are-other-things-to-check-that-are-more-important" class="section level1">
<h1><span class="header-section-number">7</span> But there are other things to check that are more important!</h1>
<blockquote>
<p>We make assumptions of the error structure in linear regression (<span class="math inline">\(\varepsilon\)</span>)</p>
</blockquote>
<p>Remember:<br />
<span class="math display">\[Y_i = \beta_0 + \beta_1 \times X_i + \varepsilon_i\]</span></p>
<ul>
<li>Does not change our estimates of <span class="math inline">\(\beta_0\)</span> or <span class="math inline">\(\beta_1\)</span></li>
<li>Affects our confidence intervals of the estimate and thus hypothesis testing</li>
<li>Because <span class="math inline">\(\varepsilon_i\)</span> is random, our assumptions also apply to the response variable <span class="math inline">\(y_i\)</span></li>
</ul>
<img src="biostats-GLM3_files/figure-html/meme-1.png" width="240" style="display: block; margin: auto;" />
<center>
Did you know you could make memes in R?
</center>
<hr />
</div>
<div id="assumptions-of-linear-regression" class="section level1">
<h1><span class="header-section-number">8</span> Assumptions of linear regression</h1>
<p>Linear models assume that the relationship between the response and predictor is <em>linear</em>. In addition to this main condition, there are 4 assumptions of linear regression:</p>
<ol style="list-style-type: decimal">
<li>Normality</li>
<li>Homogeneity of Variance</li>
<li>Independence</li>
<li>Fixed X</li>
</ol>
<blockquote>
<p><strong>ALWAYS</strong> check these assumptions every time you fit a model. No exceptions! No excuses!</p>
</blockquote>
<div id="residual-plots" class="section level2">
<h2><span class="header-section-number">8.1</span> Residual plots</h2>
<p>In R, we can evaluate models from <strong>residual plots</strong>:</p>
<pre><code>Model &lt;- lm(Y ~ X, data) # build a model
plot(Model) # show residual plots</code></pre>
<p>There are 4 plots called. In order:</p>
<ol style="list-style-type: decimal">
<li>Residuals vs fitted values
<ul>
<li>bits left over vs what the model predicted</li>
</ul></li>
<li>Standardised residual quantile-quantile plot
<ul>
<li>what is the spread of the residuals?</li>
</ul></li>
<li>Scale-Location
<ul>
<li>like plot 1 but shown differently</li>
</ul></li>
<li>Residuals vs Leverage
<ul>
<li>are there any influential data points?</li>
</ul></li>
</ol>
</div>
<div id="mammal-brain-and-body-size" class="section level2">
<h2><span class="header-section-number">8.2</span> Mammal brain and body size</h2>
Let’s look at these assumptions in detail using the relationship between brain mass and body mass for different mammals. The dataset is called <code>mammals</code> in the <code>MASS</code> package.<br />

<div class="figure" style="text-align: center"><span id="fig:mammal-brains"></span>
<img src="biostats-GLM3_files/figure-html/mammal-brains-1.png" alt="The relationship between mammal body size and brain size" width="300" />
<p class="caption">
Figure 8.1: The relationship between mammal body size and brain size
</p>
</div>
</div>
</div>
<div id="normality" class="section level1">
<h1><span class="header-section-number">9</span> 1. Normality</h1>
<blockquote>
<p>Population Y values and error terms (<span class="math inline">\(\varepsilon_i\)</span>) are normally distributed for each level of the predictor variable (<span class="math inline">\(x_i\)</span>)</p>
</blockquote>
<p>The distribution of the response variable, Y, should be normally distributed (not skewed). We can graphically check this using a histogram of brain size.</p>
<p><img src="biostats-GLM3_files/figure-html/mammal-hist-1.png" width="50%" /><img src="biostats-GLM3_files/figure-html/mammal-hist-2.png" width="50%" /></p>
<div id="quantile-quantile-plots" class="section level2">
<h2><span class="header-section-number">9.1</span> Quantile-Quantile plots</h2>
<ul>
<li>We can also visualise the spread of data with a quantile-quantile plot.</li>
<li>The linear line is the expected relationship following a normal distribution.
<ul>
<li>Do our points follow the line?</li>
<li>What does it mean when the points don’t follow the line?</li>
</ul></li>
</ul>
<p><img src="biostats-GLM3_files/figure-html/mammal-quantile-1.png" width="300" style="display: block; margin: auto;" /></p>
</div>
<div id="the-residuals-of-the-model-should-be-also-normally-distributed" class="section level2">
<h2><span class="header-section-number">9.2</span> The residuals of the model should be also normally distributed</h2>
<div class="figure" style="text-align: center"><span id="fig:standard"></span>
<img src="biostats-GLM3_files/figure-html/standard-1.png" alt="Looks like distribution of brain size is skewed to the right. What does this mean biologically?" width="300" />
<p class="caption">
Figure 9.1: Looks like distribution of brain size is skewed to the right. What does this mean biologically?
</p>
</div>
</div>
<div id="what-happens-when-the-data-is-not-normal" class="section level2">
<h2><span class="header-section-number">9.3</span> What happens when the data is not normal?</h2>
<ul>
<li>Collect more data, increase sample size for each level of <span class="math inline">\(x\)</span>. Could be a sampling bias or sample size is too low</li>
<li>Use a non-parametric test
<ul>
<li>e.g. Spearman’s Rank Correlation</li>
</ul></li>
<li>Ignore it (with good reason). Linear regressions are robust to skewness</li>
<li>Some data are never normal
<ul>
<li>e.g. counts - should use Poisson distribution</li>
<li>Fit another statistical model with more appropriate error structures</li>
</ul></li>
<li>Transform the data</li>
</ul>
</div>
<div id="applying-a-transformation" class="section level2">
<h2><span class="header-section-number">9.4</span> Applying a transformation</h2>
<ul>
<li>Some transformations:
<ul>
<li>Log or natural log</li>
<li>Square root or cube root</li>
</ul></li>
<li>Note: <code>log(0)</code> or <code>log(-1)</code> is undefined so you could make data positive and greater than 0 before you log transform them.</li>
<li>More sophisticated transformations not covered in this module</li>
</ul>
</div>
<div id="transforming-brain-size" class="section level2">
<h2><span class="header-section-number">9.5</span> Transforming brain size</h2>
<ul>
<li>Let’s try some transformations on the data</li>
<li>What is the transformation doing?</li>
<li>Which would you choose?</li>
</ul>
<p><img src="biostats-GLM3_files/figure-html/transform-1.png" width="800" style="display: block; margin: auto;" /></p>
</div>
<div id="re-run-the-model-with-transformed-data" class="section level2">
<h2><span class="header-section-number">9.6</span> Re-run the model with transformed data</h2>
<div class="figure" style="text-align: center"><span id="fig:new-graph"></span>
<img src="biostats-GLM3_files/figure-html/new-graph-1.png" alt="That looks better!" width="300" />
<p class="caption">
Figure 9.2: That looks better!
</p>
</div>
<p>If you transform data, then the model estimates refer to the transformed units. Remember to tranform them back to their correct units.</p>
</div>
</div>
<div id="homogeneity-of-variance" class="section level1">
<h1><span class="header-section-number">10</span> 2. Homogeneity of Variance</h1>
<blockquote>
<p>Population Y values and error terms (<span class="math inline">\(\varepsilon_i\)</span>) have the same variance for each level of the predictor variable (<span class="math inline">\(x_i\)</span>)</p>
</blockquote>
<ul>
<li>Related to the assumptions of Normality but more important!</li>
<li>Look at patterns in standardised residuals:
<ul>
<li>Quantile plot</li>
<li>Relationship with fitted values (predicted Y values from line)</li>
</ul></li>
</ul>
<p>Causes:</p>
<ul>
<li>small sample size</li>
<li>outliers</li>
<li>non-normally distributed variables</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Have properly designed experiments<br />
</li>
<li>Collect enough data<br />
</li>
<li>Deal with it like as normality</li>
</ul>
<div id="should-expect-a-normal-distribution-of-standardised-residuals" class="section level2">
<h2><span class="header-section-number">10.1</span> Should expect a <strong>normal distribution</strong> of standardised residuals</h2>
<div class="figure" style="text-align: center"><span id="fig:qqnormresid"></span>
<img src="biostats-GLM3_files/figure-html/qqnormresid-1.png" alt="data falls along line = good" width="300" />
<p class="caption">
Figure 10.1: data falls along line = good
</p>
</div>
</div>
<div id="are-there-trends-in-the-residual-vs-fitted-values" class="section level2">
<h2><span class="header-section-number">10.2</span> Are there trends in the residual vs fitted values?</h2>
<p>Expect no relationship between standardised (or non-standardised) residuals and fitted values of model</p>
<ul>
<li>straight line = good</li>
<li>no humps or valleys</li>
</ul>
<p><img src="biostats-GLM3_files/figure-html/resid-1.png" width="800" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="independence" class="section level1">
<h1><span class="header-section-number">11</span> 3. Independence</h1>
<blockquote>
<p>Population Y values and error terms (<span class="math inline">\(\varepsilon_i\)</span>) are independent</p>
</blockquote>
<ul>
<li>They do not influence each other (not autocorrelated)</li>
<li>Often because of inappropriate experimental design
<ul>
<li>time series</li>
<li>pseudo-replication</li>
<li>repeated measurements</li>
</ul></li>
<li>Increases Type I error</li>
</ul>
<div id="dealing-with-independence" class="section level2">
<h2><span class="header-section-number">11.1</span> Dealing with independence</h2>
<p>Best thing is to choose a different model<br />
Consider using random effects models or choosing better variables (i.e. good experimental design)</p>
</div>
</div>
<div id="fixed-x" class="section level1">
<h1><span class="header-section-number">12</span> 4. Fixed X</h1>
<blockquote>
<p>The predictor variable (<span class="math inline">\(x_i\)</span>) is fixed. i.e. a known constant</p>
</blockquote>
<p>Called Type I model or fixed effects model</p>
<ul>
<li>Often broken in biological stats</li>
<li>Predictor variables can be random
<ul>
<li>Called Type II (random effects model)</li>
</ul></li>
<li>Hypothesis testing of Type I applies to Type II</li>
</ul>
<hr />
</div>
<div id="other-regression-diagnostics" class="section level1">
<h1><span class="header-section-number">13</span> Other regression diagnostics</h1>
<ul>
<li>How well does the model fit the data?
<ul>
<li>Coefficient of determination <span class="math inline">\(R^2\)</span></li>
</ul></li>
<li>Is a simple linear regression appropriate?
<ul>
<li>e.g. polynomial or curvilinear model</li>
</ul></li>
<li>Are there effects of outliers in the model?</li>
</ul>
<div id="outliers-leverage-and-influence" class="section level2">
<h2><span class="header-section-number">13.1</span> Outliers, leverage and influence</h2>
<blockquote>
<p>Outliers are abnormal or unusual observations relative to the rest of the data that can cause biases during analysis</p>
</blockquote>
<ul>
<li>Outliers can be checked before applying a model. How?</li>
<li>Sometimes caused by experimental error but sometimes significantly different data points are not outliers
<ul>
<li>Natural variation</li>
</ul></li>
<li>Leverage = how much x influences y</li>
<li>Influence = how much x influences the slope of the line (Cook’s Distance)</li>
</ul>
<p>If outliers are caused by experimental error or bias, you could justify excluding it from data.<br />
<strong>But <em>never</em> delete observations to force a better model fit</strong></p>
</div>
<div id="outliers-in-the-mammal-dataset" class="section level2">
<h2><span class="header-section-number">13.2</span> Outliers in the mammal dataset</h2>
<div class="figure" style="text-align: center"><span id="fig:outliers"></span>
<img src="biostats-GLM3_files/figure-html/outliers-1.png" alt="Looks like humans, water opossums &amp; musk shrew have high influence on the regression" width="300" />
<p class="caption">
Figure 13.1: Looks like humans, water opossums &amp; musk shrew have high influence on the regression
</p>
</div>
<hr />
</div>
</div>
<div id="putting-it-all-together" class="section level1">
<h1><span class="header-section-number">14</span> Putting it all together</h1>
<p>These assumptions can be checked by looking at the residual plots. R shows residual plots using the function <code>plot(lm())</code>.</p>
<p><img src="biostats-GLM3_files/figure-html/residual-plot-1.png" width="800" style="display: block; margin: auto;" /></p>
<p>Let’s evaluate the residual plot, starting from the top left:</p>
<ul>
<li>Are the residuals vs fitted values equal (i.e. a straight line)? If there are humps or valleys, the model may not be appropriate for the data.</li>
<li>Are the standardised residuals normally distributed? Linear models assume that residuals are normally distributed. If not, your model is inappropriate for your data or your data is skewed in some way.</li>
<li>Is there a pattern to your <span class="math inline">\(\sqrt{\mbox{Standardised residuals}}\)</span>? Linear models assume equal variance so there should be no pattern in your residuals.</li>
<li>Are there any outlier data points that have strong leverage in the model? E.g. potential outliers or influential data points.</li>
</ul>
<hr />
</div>
<div id="ancova" class="section level1">
<h1><span class="header-section-number">15</span> ANCOVA</h1>
<p>Remember Analysis of Covariance deals with the effect of two predictor variable, a continuous and categorical variable, on a continuous response variable. Like an ANOVA adjusted for the effect of an additional continuous covariate.<br />
Follows all the assumptions above <em>plus two extra ones</em>:</p>
<div id="covariate-values-cover-a-similar-range-across-groups" class="section level2">
<h2><span class="header-section-number">15.1</span> 1. Covariate values cover a similar range across groups</h2>
<p>Data from groups should overlap across the range of the continuous variable</p>
<div class="figure"><span id="fig:ancova"></span>
<img src="biostats-GLM3_files/figure-html/ancova-1.png" alt="Which of these violates ANCOVA assumptions?" width="50%" /><img src="biostats-GLM3_files/figure-html/ancova-2.png" alt="Which of these violates ANCOVA assumptions?" width="50%" />
<p class="caption">
Figure 15.1: Which of these violates ANCOVA assumptions?
</p>
</div>
<p>If the first assumption is not met, ANCOVA fails to separate the effects of the two predictors on the response variable.</p>
<p>Extending regression models beyond the range of data could be <em>extrapolation</em> and lead to incorrect conclusions.</p>
</div>
<div id="regression-slopes-are-similar-across-groups" class="section level2">
<h2><span class="header-section-number">15.2</span> 2. Regression slopes are similar across groups</h2>
<p>Like a fixed or additive linear regression.<br />
If the second assumption is not met, you can still fit an “ANCOVA-like” model to the data with different slopes for different groups (i.e. a mixed or random model). Then it’s not a true ANCOVA in the classic sense.</p>
<hr />
</div>
</div>
<div id="some-data-are-never-normal" class="section level1">
<h1><span class="header-section-number">16</span> Some data are never normal</h1>
<ul>
<li>Non-linear data - e.g. exponential growth of bacteria, human populations</li>
<li>Counts or proportions, number of cells in petri dish, proportion of animals that survive</li>
<li>Categorical data</li>
</ul>
<p>Simple linear regressions aren’t the most appropriate for these data and may give distorted results.<br />
<em>But</em> we can use linear regression to analyse these data if we relax our assumptions a bit…called “general linear models”</p>
</div>
<div id="generalised-linear-models" class="section level1">
<h1><span class="header-section-number">17</span> Generalised linear models</h1>
<blockquote>
<p><em>General linear models</em>, or just linear models (LM), refer to linear regression of data following a normal probability distribution, fixed or random. If we do a linear regression on based on a non-normal probability distribution that’s called a <em>general<strong>ised</strong> linear model</em> (usually abbreviated to GLM).</p>
</blockquote>
<p>There are many types but we will briefly describe two common probability distributions:</p>
<ul>
<li>Binomial regression - for binomial data following a binomial distribution
<ul>
<li>yes/no</li>
<li>alive/dead</li>
</ul></li>
<li>Poisson regression - for count or contingency table data following a Poisson distribution</li>
</ul>
<p>In <code>R</code> GLMs are done using <code>glm(Y ~ X * A, data, family = &lt;insert here&gt;)</code>. <code>Family</code> refers to the underlying probability distribution. Using <code>family = gaussian</code> is the same as <code>lm()</code> for a normal distribution. So:</p>
<ul>
<li><code>poisson</code> for a Poisson distribution</li>
<li><code>binomial</code> for a binomial distribution</li>
</ul>
<p>But the model outputs are interpreted differently to normal distributions because they <em>link</em> the relationship between the predictor and the response differently.</p>
<div id="poisson-regression" class="section level2">
<h2><span class="header-section-number">17.1</span> Poisson regression</h2>
<ul>
<li>Uses a log linear link function where the response variable (counts) is on a log scale</li>
<li>Interpretation is similar to lm with estimates for the intercept, slopes and differences in estimates among groups
<ul>
<li>Estimates are the <strong>log of the expected count</strong> as a function of the predictor variables</li>
<li>Cannot have negative or 0 values</li>
</ul></li>
<li>Test overall effects of predictors by comparing models with different predictors representing null and alternative hypotheses</li>
<li>See later lectures about <span class="math inline">\(\chi^2\)</span> tests.</li>
</ul>
<div id="number-of-oystercatchers-wetland-birds-in-south-africa" class="section level3">
<h3><span class="header-section-number">17.1.1</span> Number of Oystercatchers (wetland birds) in South Africa</h3>
<p>Data is <code>waders</code> from <code>MASS</code>. I have maniuplated the data so it is suitable for analysis - code below.</p>
<pre class="r"><code># create data set of oystercatcher counts (column 1) and site labels
waders &lt;- data.frame(Oystercatcher = MASS::waders[,1],
                     site = letters[1:15])
# poisson regression
summary(glm(Oystercatcher + 1 ~ site, waders, family = poisson))</code></pre>
<pre><code>
Call:
glm(formula = Oystercatcher + 1 ~ site, family = poisson, data = waders)

Deviance Residuals: 
 [1]  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0

Coefficients:
            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)   2.5649     0.2774   9.248  &lt; 2e-16 ***
siteb         2.0402     0.2948   6.920 4.51e-12 ***
sitec         2.7233     0.2863   9.512  &lt; 2e-16 ***
sited        -2.5649     1.0377  -2.472   0.0134 *  
sitee         1.7918     0.2996   5.981 2.22e-09 ***
sitef         0.4308     0.3563   1.209   0.2266    
siteg         4.3665     0.2791  15.645  &lt; 2e-16 ***
siteh         1.9124     0.2971   6.436 1.23e-10 ***
sitei         4.1058     0.2796  14.683  &lt; 2e-16 ***
sitej         1.8539     0.2983   6.215 5.12e-10 ***
sitek         3.5984     0.2811  12.800  &lt; 2e-16 ***
sitel         1.7918     0.2996   5.981 2.22e-09 ***
sitem         0.5705     0.3470   1.644   0.1001    
siten        -2.5649     1.0377  -2.472   0.0134 *  
siteo        -2.5649     1.0377  -2.472   0.0134 *  
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 5.3666e+03  on 14  degrees of freedom
Residual deviance: 1.6653e-14  on  0  degrees of freedom
AIC: 114.06

Number of Fisher Scoring iterations: 3</code></pre>
<p>Why did I add 1 to the variable Oystercatcher in the poisson regression?</p>
<pre class="r fold-hide"><code>1 is a dummy variable to remove 0s from the counts - or log(0) will mess up the estimation of parameters</code></pre>
<p>What is the link function for a poisson regression?</p>
<pre class="r fold-hide"><code>(natural) log link</code></pre>
<p>What is the expected number of Oystercatchers at site k?</p>
<pre class="r fold-hide"><code>474 oystercatchers

Remember in linear regression (and by extension GLMs) the Intercept estimate is the estimated coefficient for the first site (site a) and the rest are the difference between site a and the respective site. So for site k you need to add the estimated coefficients together.

Coefficient for k:  2.5649 + 3.5984 = 6.1633
But remember this is log counts so you need to transform it back to regular counts:
  exp(6.1633) = 474.993
Then remember we added a dummy variable so you need to subtract that from our estimate:
  474.993 - 1 = 473.993 which rounded to the nearest whole number (as counts are discrete variables) is 474!</code></pre>
</div>
</div>
<div id="binomial-logistic-regression" class="section level2">
<h2><span class="header-section-number">17.2</span> Binomial (logistic) regression</h2>
<ul>
<li>Uses a logit link function so the response variable is the <strong>log odds</strong></li>
<li>Estimates are log odds and the probability of an event
<ul>
<li>Intercept is log odds of first group</li>
<li>Estimates for other groups are the ratio of log odds</li>
<li>Transform from log odds to odds using <code>exp()</code></li>
</ul></li>
</ul>
<p>What is the function to conduct an Poisson regression in R?</p>
<pre class="r fold-hide"><code>glm(Y ~ X, data, family = poisson)</code></pre>
<div id="melanoma-tumor-thickness-and-survival" class="section level3">
<h3><span class="header-section-number">17.2.1</span> Melanoma tumor thickness and survival</h3>
<p>Data is <code>Melanoma</code> from <code>MASS</code>. I have maniuplated the data so it is suitable for analysis - code below.</p>
<pre class="r"><code># create data set of oystercatcher counts (column 1) and site labels
Melanoma &lt;- subset(Melanoma, Melanoma$status != 3) # remove observations of other causes of death
Melanoma$status &lt;- Melanoma$status - 1 # create binary variables: 0 = died, 1 = alive

# binary regression
model &lt;- glm(status ~ thickness, Melanoma, family = binomial)
summary(model)</code></pre>
<pre><code>
Call:
glm(formula = status ~ thickness, family = binomial, data = Melanoma)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-1.8588  -1.2162   0.6729   0.7485   1.8844  

Coefficients:
            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)  1.61134    0.25496   6.320 2.62e-10 ***
thickness   -0.24853    0.06354  -3.911 9.18e-05 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 232.84  on 190  degrees of freedom
Residual deviance: 213.45  on 189  degrees of freedom
AIC: 217.45

Number of Fisher Scoring iterations: 4</code></pre>
<pre class="r"><code>plot(status ~ thickness, Melanoma, pch = 19) # plot
# plot binomial regression in blue
newdat &lt;- data.frame(thickness=seq(min(Melanoma$thickness), max(Melanoma$thickness),len=100))
newdat$status &lt;- predict(model, newdata=newdat, type=&quot;response&quot;)
lines(status ~ thickness, newdat, col=&quot;blue&quot;, lwd=2)</code></pre>
<p><img src="biostats-GLM3_files/figure-html/Melanoma-1.png" width="300" style="display: block; margin: auto;" /></p>
<p>Is there a relationship between Melanoma tumor thickness (mm) and whether a patient survives?</p>
<pre class="r fold-hide"><code>Yes. The thicker the tumour, the greater the odds of death. The P value of the slope of the binomial regression is significantly different from 0. P &lt; 0.001.</code></pre>
<p>What does the coefficient estimate of <code>-0.24853</code> for the variable <code>thickness</code> represent?</p>
<pre class="r fold-hide"><code>The estimate represents the log odds of survival as a function of tumour thickness. In other words, we expect the log odds of survival to decrease by 0.25 for a 1 mm increase in tumour thickness. 

We can transform log odds to odds by taking the exponential: exp(-0.24853) = 0.7799465. 1 - 0.7799465 = 0.22, so for every 1 mm increase in tumour thickness we expect the odds of survival to decrease by 22 %</code></pre>
<p>What is the probability of survival with a tumor 5 mm thick?</p>
<pre class="r fold-hide"><code>The logit formula is logit = p/(1-p) and the regression equation is logit(p) = 1.61134 - 0.24853 * thickness
so logit(p) =  1.61134 - 0.24853 * 5 = 0.36869

and to turn logit p into probability (p):
p = exp(logit(p))/(1 + exp(logit(p)))
  = exp(0.36869)/(1 + exp(0.36869))
  = 0.5911424

The probability of surviving is 59 %</code></pre>
<p>Wear suncreeen!</p>
<hr />
</div>
</div>
</div>
<div id="take-home-messages" class="section level1">
<h1><span class="header-section-number">18</span> Take home messages</h1>
<ul>
<li>Always check assumptions</li>
<li>Interpret model in a biological context
<ul>
<li>Biological data is messy: good model can have low R2</li>
<li>Outliers aren’t always mistakes</li>
<li>Statistical significance <span class="math inline">\(\neq\)</span> biological significance</li>
</ul></li>
<li>Is the model appropriate for the question?</li>
<li>Can my experiment actually test my hypothesis?</li>
<li><strong><em>Never</em> delete observations to force a better model fit or fit assumptions</strong></li>
</ul>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIlN0YXRpc3RpY2FsIG1vZGVsbGluZyAzOiBFdmFsdWF0aW5nIGxpbmVhciBtb2RlbHMgJiBHTE1TIg0KZGF0ZTogImByIGZvcm1hdChTeXMuRGF0ZSgpLCAnJWQtJWItJVknKWAiDQplZGl0b3Jfb3B0aW9uczoNCiAgY2h1bmtfb3V0cHV0X3R5cGU6IGNvbnNvbGUNCi0tLQ0KDQpgYGB7ciBzZXR1cCwgaW5jbHVkZT1GQUxTRX0NCmxpYnJhcnkoa25pdHIpDQpvcHRzX2NodW5rJHNldChlY2hvID0gRiwgd2FybmluZyA9IEZBTFNFLCBtZXNzYWdlID0gRkFMU0UsIGNvbW1lbnQgPSBOQSwgZmlnLmhlaWdodCA9IDMsIGZpZy53aWR0aCA9IDMsIGRwaSA9IDEwMCwgZmlnLmFsaWduID0gImNlbnRlciIsIGZpZy5zaG93ID0gImhvbGQiKQ0KbGlicmFyeSh0aWR5dmVyc2UpDQpsaWJyYXJ5KGNvd3Bsb3QpDQp0aGVtZV9zZXQodGhlbWVfY2xhc3NpYygpKQ0KbGlicmFyeShNQVNTKQ0Kb3B0aW9ucyhnZ3Bsb3QyLmNvbnRpbnVvdXMuY29sb3VyPSJ2aXJpZGlzIikNCnNjYWxlX2NvbG91cl9kaXNjcmV0ZSA8LSBmdW5jdGlvbiguLi4pICAgc2NhbGVfY29sb3VyX3ZpcmlkaXNfZCgpDQpgYGANCg0KKioqDQoNCiMgT3ZlcmFsbCBsZWN0dXJlIGFpbXMNCg0KKiBJZGVudGlmeSB0aGUgc3RydWN0dXJlIG9mIGdlbmVyYWwgbGluZWFyIG1vZGVscw0KKiBEZXNjcmliZSBob3cgbGluZWFyIG1vZGVscyBhcmUgcGFyYW1ldHJpemVkDQoqIFVuZGVyc3RhbmQgaG93IHRvIHVzZSBsaW5lYXIgbW9kZWxzDQoqIFVuZGVyc3RhbmQgaG93IHRvIGludGVycHJldCBhbmQgZXZhbHVhdGUgbGluZWFyIG1vZGVscw0KDQojIyBPdGhlciByZXNvdXJjZXMNCiANCiogU2VlaW5nIFRoZW9yeS4gQ2hhcHRlciA2LiBodHRwczovL3NlZWluZy10aGVvcnkuYnJvd24uZWR1L3JlZ3Jlc3Npb24tYW5hbHlzaXMvaW5kZXguaHRtbA0KKiBTdGF0aXN0aWNzOiBhbiBpbnRyb2R1Y3Rpb24gdXNpbmcgUi4gTWljaGFlbCBKLiBDcmF3bGV5LiBXaWxleSBQcmVzcy4gQ2hhcHRlcnMgNyAtIDExLg0KKiBFeHBlcmltZW50YWwgRGVzaWduIGFuZCBEYXRhIEFuYWx5c2lzIGZvciBCaW9sb2dpc3RzLiBHZXJyeSBQLiBRdWlubiAmIE1pY2hhZWwgSi4gS2VvdWdoLiBDYW1icmlkZ2UgUHJlc3MuIENoYXB0ZXJzIDUsIDYsIDgsIDEyLg0KKiBodHRwczovL2xlYXJuaW5nc3RhdGlzdGljc3dpdGhyLmNvbS9ib29rL2luZGV4Lmh0bWwNCiogW0FuIGludGVyYWN0aXZlIHZpc3VhbCBleHBsYW5hdGlvbiBvZiBoaWVyYXJjaGljYWwgTW9kZWxzXShodHRwOi8vbWZ2aXouY29tL2hpZXJhcmNoaWNhbC1tb2RlbHMvKQ0KDQojIyBCeSB0aGUgZW5kIG9mIHRoaXMgbGVjdHVyZSB5b3Ugc2hvdWxkOg0KIA0KKiBLbm93IGhvdyB0aGUgY29lZmZpY2llbnQgb2YgZGV0ZXJtaW5hdGlvbiBpcyBjYWxjdWxhdGVkIGFuZCBpdHMgaW50ZXJwcmV0YXRpb24NCiogVW5kZXJzdGFuZCB0aGUgYXNzdW1wdGlvbnMgb2YgbGluZWFyIHJlZ3Jlc3Npb24NCiogQmUgYWJsZSB0byBldmFsdWF0ZSB0aGUgYXBwcm9wcmlhdGVuZXNzIG9mIGEgbGluZWFyIG1vZGVsIHRvIGRhdGEgYmFzZWQgb24gcmVzaWR1YWwgcGxvdHMNCiogQmUgYWJsZSB0byBpZGVudGlmeSBnZW5lcmFsaXNlZCBsaW5lYXIgbW9kZWxzIGFwcHJvcHJpYXRlIGZvciBkYXRhIA0KDQoqKioNCg0KIyBCeSBub3cgeW91IHNob3VsZCBiZSBjb21mb3J0YWJsZSB3aXRoIGJ1aWxkaW5nIGFuZCBpbnRlcnByZXRpbmcgYmFzaWMgbGluZWFyIG1vZGVscyBpbiBSIA0KDQo+IGJ1dCBob3cgZG8gd2Uga25vdyB3aGV0aGVyIG91ciBtb2RlbCBpcyBhICJnb29kIiBvbmU/DQoNCldlIG5lZWQgdG8gZXZhbHVhdGUgb3VyIG1vZGVsLiBUaGVyZSBhcmUgYSBmZXcgdGhpbmdzIHdlIHNob3VsZCBjb25zaWRlcjoNCg0KMS4gSG93IG11Y2ggdmFyaWF0aW9uIGluIHRoZSBkYXRhIGlzIGV4cGxhaW5lZCBieSB0aGUgbW9kZWw/DQoyLiBBcmUgbGluZWFyIG1vZGVscyBhcHByb3ByaWF0ZSBmb3Igb3VyIGh5cG90aGVzZXM/DQoNCioqKg0KDQojIFdoYXQgZG9lcyBhIGxpbmVhciBtb2RlbCB0ZWxsIHVzPw0KDQoxLiBXaGF0IHdpbGwgYSBuZXcgdmFsdWUgb2YgWSBiZSwgZ2l2ZW4gYSBuZXcgdmFsdWUgb2YgWD8NCjIuIERvZXMgdGhlIHBvcHVsYXRpb24gc2xvcGUgJFxiZXRhXzEkIGRpZmZlciB0byAwPw0KMy4gKipIb3cgbXVjaCB2YXJpYXRpb24gaW4gWSBjYW4gYmUgZXhwbGFpbmVkIGl0cyBsaW5lYXIgcmVsYXRpb25zaGlwIHdpdGggWD8qKg0KICAqIENvZWZmaWNpZW50IG9mIGRldGVybWluYXRpb24gKCRSXjIkKQ0KICAqIFBhcnRpdGlvbmluZyB2YXJpYW5jZSAoRiByYXRpbykNCiAgDQojIEhvdyBtdWNoIHZhcmlhdGlvbiBpbiBZIGNhbiBiZSBleHBsYWluZWQgaXRzIGxpbmVhciByZWxhdGlvbnNoaXAgd2l0aCBYPw0KDQokJCBcZnJhY3tWYXJfe1x0ZXh0e2V4cGxhaW5lZCBieSB0aGUgbGluZX19fXtWYXJfe1x0ZXh0e25vdCBleHBsYWluZWQgYnkgdGhlIGxpbmV9fX0gPSBSYXRpbyQkDQpJbnRlcnByZXRpbmcgcmF0aW9zOiAgDQpSYXRpbyA+IDEgPSBMaW5lIGV4cGxhaW5zIG1vcmUgdGhhbiByZXNpZHVhbCAgDQpSYXRpbyDiiaQgMSA9IExpbmUgZXhwbGFpbnMgdmVyeSBsaXR0bGUgKG51bGwgaHlwb3RoZXNpcykgIA0KDQo+IFdlIG5lZWQgdG8ga25vdyB0aGUgdG90YWwgYW1vdW50IG9mIHZhcmlhdGlvbiBhbmQgYWxsIHBvc3NpYmxlIHNvdXJjZXMgb2YgdmFyaWF0aW9uIChsaWtlIHRoZSBGLXJhdGlvICYgQU5PVkEpDQoNCiMjIFdoYXQgaXMgb3IgaXNuJ3QgZXhwbGFpbmVkIGJ5IHRoZSBsaW5lPw0KDQojIyMgSXNuJ3Q6IFN1bSBvZiBTcXVhcmVzIG9mIHRoZSBFcnJvciAoU1NZKQ0KDQpUaGUgYml0IG5vdCBleHBsYWluZWQgYnkgdGhlIG51bGwgKHRvdGFsIHZhcmlhdGlvbiBpbiB0aGUgZGF0YSkuIFJlbWVtYmVyLCB0aGUgbnVsbCBpcyAkXGJhcnt5fSQgPSB0aGUgbWVhbiBvZiBZLg0KDQokJFNTWSA9IHlfaSAtIFxiYXJ7eX0kJA0KDQpgYGB7ciBTU1ksIGZpZy5jYXAgPSAiQmxhY2sgbGluZSBpcyB0aGUgbWVhbiBvZiBZLiBCbHVlIGxpbmVzIGFyZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBtZWFuIGFuZCBhIHNpbmdsZSBvYnNlcnZhdGlvbiA9IFNTWSIsIGZpZy5oZWlnaHQgPSA1LCBmaWcud2lkdGggPSA1fQ0KcGxvdChIZWlnaHQgfiBHaXJ0aCwgdHJlZXMpDQphYmxpbmUobWVhbih0cmVlcyRIZWlnaHQpLDAsIGx3ZD0zLCBsdHkgPSAyKQ0KZm9yKGkgaW4gc2VxX2Fsb25nKHRyZWVzJEhlaWdodCkpIHsNCgkgIHNlZ21lbnRzKHgwID0gdHJlZXMkR2lydGhbaV0sIHkwPSB0cmVlcyRIZWlnaHRbaV0sIA0KCSAgICAgICAgICAgeDEgPSB0cmVlcyRHaXJ0aFtpXSwgeTE9bWVhbih0cmVlcyRIZWlnaHQpLCBjb2wgPSAiYmx1ZSIpDQoJfQ0KYGBgDQoNCiMjIyBJc24ndDogU3VtIG9mIFNxdWFyZXMgb2YgdGhlIFJlc2lkdWFsIChTU0UpDQpUaGUgYml0IG5vdCBleHBsYWluZWQgYnkgdGhlIGxpbmUNCg0KJCRTU0UgPSB5X2kgLSBcaGF0e3lfaX0kJA0KDQpgYGB7ciBTU0UsIGZpZy5jYXAgPSAiUmVzaWR1YWxzIChibHVlIGxpbmVzKSBhcmUgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgZGF0YSBwb2ludCBhbmQgdGhlIHByZWRpY3RlZCBsaW5lIChibGFjayBsaW5lKSIsIGZpZy5oZWlnaHQgPSA1LCBmaWcud2lkdGggPSA1fQ0KcGxvdChIZWlnaHQgfiBHaXJ0aCwgdHJlZXMpDQp0cmVlX2xtIDwtIGxtKEhlaWdodCB+IEdpcnRoLCB0cmVlcykNCmFibGluZSh0cmVlX2xtLCBsd2Q9MykNCmZvcihpIGluIHNlcV9hbG9uZyh0cmVlcyRIZWlnaHQpKSB7DQoJICBzZWdtZW50cyh4MCA9IHRyZWVzJEdpcnRoW2ldLCB5MCA9IHRyZWVzJEhlaWdodFtpXSwgDQoJICAgICAgICAgICB4MSA9IHRyZWVzJEdpcnRoW2ldLCB5MT0gY29lZih0cmVlX2xtKVsxXStjb2VmKHRyZWVfbG0pWzJdKnRyZWVzJEdpcnRoW2ldLCBjb2wgPSAiYmx1ZSIpDQoJfQ0KYGBgDQoNCg0KIyMjIElzbid0OiBTdW0gb2YgU3F1YXJlcyBvZiB0aGUgUmVncmVzc2lvbiAoU1NSKQ0KSG93IHdlbGwgdGhlIGxpbmUgZXN0aW1hdGVzIHRoZSBtZWFuIG9mIFkNCg0KJCRTU1IgPSBcaGF0e3lfaX0gLSBcYmFye3l9JCQNCg0KYGBge3IgU1NSLCBmaWcuY2FwID0gIlJlc2lkdWFscyAoYmx1ZSBsaW5lcykgYXJlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIG51bGwgaHlwb3RoZXNpcyAobWVhbiBvZiBvYnNlcnZhdGlvbnMsIGRhc2hlZCBsaW5lcykgYW5kIHRoZSBwcmVkaWN0ZWQgbGluZSAoYmxhY2sgbGluZSkiLCBmaWcuaGVpZ2h0ID0gNSwgZmlnLndpZHRoID0gNX0NCnBsb3QoSGVpZ2h0IH4gR2lydGgsIHRyZWVzKQ0KYWJsaW5lKHRyZWVfbG0sIGx3ZD0zKQ0KYWJsaW5lKG1lYW4odHJlZXMkSGVpZ2h0KSwwLCBsd2Q9MywgbHR5ID0gMikNCmZvcihpIGluIHNlcV9hbG9uZyh0cmVlcyRIZWlnaHQpKSB7DQoJICBzZWdtZW50cyh4MCA9IHRyZWVzJEdpcnRoW2ldLCB5MCA9IG1lYW4odHJlZXMkSGVpZ2h0KSwgDQoJICAgICAgICAgICB4MSA9IHRyZWVzJEdpcnRoW2ldLCB5MT0gY29lZih0cmVlX2xtKVsxXStjb2VmKHRyZWVfbG0pWzJdKnRyZWVzJEdpcnRoW2ldLCBjb2wgPSAiYmx1ZSIpDQoJfQ0KYGBgDQoNCg0KPiBOb3RpY2UgdGhhdCBzaW5jZSBTU1kgaXMgYWxsIHZhcmlhdGlvbiBpbiB0aGUgZGF0YTogIA0KPiBTU1kgPSBTU0UgKyBTU1INCg0KIyBTbyB3aGljaCBiaXRzIGRvIHdlIHVzZSB0byBldmFsdWF0ZSBtb2RlbCAiZml0Ij8NCg0KJCQgXGZyYWN7VmFyX3tcdGV4dHtleHBsYWluZWQgYnkgdGhlIGxpbmV9fX17VmFyX3tcdGV4dHtub3QgZXhwbGFpbmVkIGJ5IHRoZSBsaW5lfX19ID0gUmF0aW8kJA0KV2Ugd2FudCB0aGUgbnVtYmVyIGFib3ZlIHRoZSBsaW5lIChub21pbmF0b3IpIHRvIGJlIGxhcmdlciB0aGFuIHRoZSBudW1iZXIgYmVsb3cgdGhlIGxpbmUgKGRlbm9taW5hdG9yKSwgb3RoZXJ3aXNlIHdlIGNhbm5vdCBiZSBjb25maWRlbnQgdGhhdCBvdXIgcmVzdWx0cyBhcmUgZGlmZmVyZW50IHRvIHJhbmRvbWx5IGdlbmVyYXRlZCBudW1iZXJzLg0KDQpJbnRlcnByZXRpbmcgcmF0aW9zOiAgDQpSYXRpbyA+IDEgPSBMaW5lIGV4cGxhaW5zIG1vcmUgdGhhbiByZXNpZHVhbCAgDQpSYXRpbyDiiaQgMSA9IExpbmUgZXhwbGFpbnMgdmVyeSBsaXR0bGUgKG51bGwgaHlwb3RoZXNpcykgIA0KDQpJbiBvdGhlciB3b3Jkcywgd2Ugd2FudCB0byBrbm93IGhvdyBtdWNoIHZhcmFpdGlvbiBpcyBjYXB0dXJlZCBieSB0aGUgbW9kZWwgcmVsYXRpdmUgdG8gdGhlIHRvdGFsIHZhcmlhdGlvbiBpbiBvdXIgZGF0YS4NCg0KV2hhdCBpcyB0aGUgZXJyb3IgdGhhdCB0ZWxscyB1cyBob3cgbXVjaCB2YXJhaXRpb24gdGhlIGxpbmUgaXMgKEgxKSBleHBsYWluaW5nIHJlbGF0aXZlIHRvIG91ciBudWxsIGh5cG90aGVzaXMgKEgwKT8gDQpgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIGV2YWwgPSBGQUxTRSwgZWNobyA9IFRSVUV9DQpTU1IgLSBTdW0gb2Ygc3F1YXJlcyBvZiB0aGUgcmVncmVzc2lvbi4NCmBgYA0KDQpXaGF0IGlzIHRoZSBlcnJvciB0aGF0IHRlbGxzIHVzIHRoZSB0b3RhbCB2YXJpYXRpb24gaW4gb3VyIGRhdGE/DQpgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIGV2YWwgPSBGQUxTRSwgZWNobyA9IFRSVUV9DQpTU1kgLSBTdW0gb2Ygc3F1YXJlcyBvZiB0aGUgZXJyb3IuIFNvbWV0aW1lcyBjYWxsZWQgU1NUIC0gdG90YWwgc3VtIG9mIHNxdWFyZXMNCmBgYA0KDQpTbyB3ZSBjYW4gZXZhbHVhdGUgaG93IG11Y2ggdmFyYWl0aW9uIHRoZSBtb2RlbCBleHBsYWlucyBieToNCg0KJCRcZnJhY3tTU1J9e1NTWX0gPSBSXjIkJA0KDQpXaHkgY2FuJ3Qgd2UgdXNlIFNTRSBhcyB0aGUgZGVub21pbmF0b3I/DQpgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIGV2YWwgPSBGQUxTRSwgZWNobyA9IFRSVUV9DQpTU0UgZGVwZW5kcyBvbiB0aGUgdG90YWwgdmFyaWF0aW9uIG9mIFkuIFdlIGNvdWxkIGhhdmUgbW9yZSB2YXJpYXRpb24gc2ltcGx5IGJ5IGhhdmluZyBtb3JlIGRhdGEgYnV0IHRoZSByYXRpbyB2YWx1ZXMgYXJlIHRoZSBzYW1lLiBTbyB1c2luZyBzdW0gb2Ygc3F1YXJlcyBkb2VzIG5vdCB0ZWxsIHVzIGFib3V0IGhvdyBtdWNoIHZhcmlhdGlvbiBpcyBleHBsYWluZWQgYnkgb3VyIG1vZGVsIGluIGEgd2F5IHRoYXQgaXMgdW5iaWFzZWQuIA0KYGBgDQoNCiMgQ29lZmZpY2llbnQgb2YgZGV0ZXJtaW5hdGlvbiAkUl4yJA0KDQo+IFRoaXMgaXMgdGhlIHByb3BvcnRpb24gb2YgdmFyaWF0aW9uIHRoYXQgeW91ciBtb2RlbCAoeW91ciBsaW5lKSBleHBsYWlucw0KDQoxID0gbm8gZGV2aWFuY2UgZnJvbSBsaW5lIChnb29kKSAgDQowID0gc3Ryb25nIGRldmlhbmNlIGZyb20gbGluZSAobm90IGdvb2QpICANCg0KSXQgaXMgcmVsYXRlZCB0byBjb3JyZWxhdGlvbiBjb2VmZmljaWVudHMgKHIpLiBCYXNpY2FsbHksICRSXjIgPSByXjIkDQoNCmBgYHtyIGZpdCwgZmlnLmNhcCA9ICJXaGljaCBmaXRzIGJldHRlcj8ifQ0KZGF0YS5mcmFtZSh4ID0gMToxMDAsIHkgPSAxOjEwMCkgJT4lIA0KZ2dwbG90KGFlcyh4LCB5KSkgKyANCiAgZ2VvbV9wb2ludCgpICsNCiAgZ2VvbV9zbW9vdGgobWV0aG9kID0gImxtIiwgc2UgPSBGKSArDQogIGFubm90YXRlKCJ0ZXh0IiwgeD0gNzUseSA9MjUsIGxhYmVsPWV4cHJlc3Npb24ocGFzdGUoUl4yLCAiPSIgKSkpICsNCiAgYW5ub3RhdGUoInRleHQiLCB4PSA4NSx5ID0yNSwgbGFiZWw9cm91bmQoc3VtbWFyeShkYXRhLmZyYW1lKHggPSAxOjEwMCwgeSA9ICgxOjEwMCkpICU+JSANCiAgbG0oKSkkci5zcXVhcmVkLCAyKSkNCg0KZGF0YS5mcmFtZSh4ID0gMToxMDAsIHkgPSAoMToxMDApKyBydW5pZigxMDAsIG1heCA9IDgwKSkgJT4lIA0KZ2dwbG90KGFlcyh4LCB5KSkgKyANCiAgZ2VvbV9wb2ludCgpICsNCiAgZ2VvbV9zbW9vdGgobWV0aG9kID0gImxtIiwgc2UgPSBGKSArDQogIGFubm90YXRlKCJ0ZXh0IiwgeD0gNzUseSA9MjUsIGxhYmVsPWV4cHJlc3Npb24ocGFzdGUoUl4yLCAiPSIgKSkpICsNCiAgYW5ub3RhdGUoInRleHQiLCB4PSA5MCx5ID0yNSwgbGFiZWw9cm91bmQoc3VtbWFyeShkYXRhLmZyYW1lKHggPSAxOjEwMCwgeSA9ICgxOjEwMCkrIHJ1bmlmKDEwMCwgbWF4ID0gODApKSAlPiUgDQogIGxtKCkpJHIuc3F1YXJlZCwgMikpDQpgYGANCg0KUiB3aWxsIGNhbGN1bGF0ZSAkUl4yJCBmb3IgeW91LiBHb2luZyBiYWNrIHRoZSB0cmVlIGhlaWdodCBhbmQgZ2lydGggZXhhbXBsZSwgdGhlICRSXjIkIGlzIGByIHJvdW5kKHN1bW1hcnkodHJlZV9sbSkkci5zcXVhcmVkLDMpYCAoTXVsdGlwbGUgUi1zcXVhcmVkKS4NCg0KYGBge3Igc3VtbWFyeSwgZmlnLmNhcD0iU2VlIHRoZSBNdWx0aXBsZSBSLXNxdWFyZWQifQ0Kc3VtbWFyeSh0cmVlX2xtKQ0KYGBgDQoNCj4gQ29uY2x1c2lvbjogdGhlIG1vZGVsICh5b3VyIGZpdHRlZCBsaW5lKSBleHBsYWlucyBgciByb3VuZChzdW1tYXJ5KHRyZWVfbG0pJHIuc3F1YXJlZCoxMDAsMClgICUgb2YgdG90YWwgdmFyaWF0aW9uIGluIGRhdGENCg0KKkJ1dC4uLioNCg0KKiBCaW9sb2dpY2FsIGRhdGEgaXMgbWVzc3ksIHRodXMgbG93ICRSXjIkIG1heSBiZSBiaW9sb2dpY2FsbHkgYWNjZXB0YWJsZQ0KKiBMb3cgJFJeMiQgZG9lcyBub3QgYWx3YXlzIG1lYW4gYSBiYWQgbW9kZWwNCiogQ29uc2lkZXIgbXVsdGlwbGUgcmVncmVzc2lvbiB0byBleHBsYWluIG1vcmUgdmFyaWFuY2UNCiAgICAqIGJ1dCBhZGRpbmcgbW9yZSBwYXJhbWV0ZXJzIGlzIG5vdCBhbHdheXMgYmV0dGVyLiBXaHk/DQoNCg0KKioqIA0KDQojIEJ1dCB0aGVyZSBhcmUgb3RoZXIgdGhpbmdzIHRvIGNoZWNrIHRoYXQgYXJlIG1vcmUgaW1wb3J0YW50IQ0KDQo+IFdlIG1ha2UgYXNzdW1wdGlvbnMgb2YgdGhlIGVycm9yIHN0cnVjdHVyZSBpbiBsaW5lYXIgcmVncmVzc2lvbiAoJFx2YXJlcHNpbG9uJCkNCg0KUmVtZW1iZXI6ICANCiQkWV9pID0gXGJldGFfMCArIFxiZXRhXzEgXHRpbWVzIFhfaSArIFx2YXJlcHNpbG9uX2kkJA0KDQoqIERvZXMgbm90IGNoYW5nZSBvdXIgZXN0aW1hdGVzIG9mICRcYmV0YV8wJCBvciAkXGJldGFfMSQNCiogQWZmZWN0cyBvdXIgY29uZmlkZW5jZSBpbnRlcnZhbHMgb2YgdGhlIGVzdGltYXRlIGFuZCB0aHVzIGh5cG90aGVzaXMgdGVzdGluZw0KKiBCZWNhdXNlICRcdmFyZXBzaWxvbl9pJCBpcyByYW5kb20sIG91ciBhc3N1bXB0aW9ucyBhbHNvIGFwcGx5IHRvIHRoZSByZXNwb25zZSB2YXJpYWJsZSAkeV9pJA0KDQpgYGB7ciBtZW1lfQ0KbGlicmFyeShtZW1lcikNCm1lbWVfZ2V0KCJUaGlua0Fib3V0SXQiKSAlPiUgDQogIG1lbWVfdGV4dF90b3AoIkNhbid0IGZpdCBhIGxpbmVhciBtb2RlbCIpICU+JSANCiAgbWVtZV90ZXh0X2JvdHRvbSgiaWYgdGhlIGRhdGEgYXJlIG5vdCBsaW5lYXIiKSANCmBgYA0KPGNlbnRlcj4gRGlkIHlvdSBrbm93IHlvdSBjb3VsZCBtYWtlIG1lbWVzIGluIFI/IDwvY2VudGVyPiAgDQoNCioqKg0KDQojIEFzc3VtcHRpb25zIG9mIGxpbmVhciByZWdyZXNzaW9uDQoNCkxpbmVhciBtb2RlbHMgYXNzdW1lIHRoYXQgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSByZXNwb25zZSBhbmQgcHJlZGljdG9yIGlzICpsaW5lYXIqLiBJbiBhZGRpdGlvbiB0byB0aGlzIG1haW4gY29uZGl0aW9uLCB0aGVyZSBhcmUgNCBhc3N1bXB0aW9ucyBvZiBsaW5lYXIgcmVncmVzc2lvbjoNCg0KMS4gTm9ybWFsaXR5DQoyLiBIb21vZ2VuZWl0eSBvZiBWYXJpYW5jZQ0KMy4gSW5kZXBlbmRlbmNlDQo0LiBGaXhlZCBYDQoNCj4qKkFMV0FZUyoqIGNoZWNrIHRoZXNlIGFzc3VtcHRpb25zIGV2ZXJ5IHRpbWUgeW91IGZpdCBhIG1vZGVsLiBObyBleGNlcHRpb25zISBObyBleGN1c2VzIQ0KDQojIyBSZXNpZHVhbCBwbG90cw0KDQpJbiBSLCB3ZSBjYW4gZXZhbHVhdGUgbW9kZWxzIGZyb20gKipyZXNpZHVhbCBwbG90cyoqOg0KDQpgYGANCk1vZGVsIDwtIGxtKFkgfiBYLCBkYXRhKSAjIGJ1aWxkIGEgbW9kZWwNCnBsb3QoTW9kZWwpICMgc2hvdyByZXNpZHVhbCBwbG90cw0KYGBgDQpUaGVyZSBhcmUgNCBwbG90cyBjYWxsZWQuIEluIG9yZGVyOg0KDQoxLiBSZXNpZHVhbHMgdnMgZml0dGVkIHZhbHVlcw0KICAgICogYml0cyBsZWZ0IG92ZXIgdnMgd2hhdCB0aGUgbW9kZWwgcHJlZGljdGVkDQoyLiBTdGFuZGFyZGlzZWQgcmVzaWR1YWwgcXVhbnRpbGUtcXVhbnRpbGUgcGxvdA0KICAgICogd2hhdCBpcyB0aGUgc3ByZWFkIG9mIHRoZSByZXNpZHVhbHM/DQozLiBTY2FsZS1Mb2NhdGlvbg0KICAgKiBsaWtlIHBsb3QgMSBidXQgc2hvd24gZGlmZmVyZW50bHkNCjQuIFJlc2lkdWFscyB2cyBMZXZlcmFnZQ0KICAgKiBhcmUgdGhlcmUgYW55IGluZmx1ZW50aWFsIGRhdGEgcG9pbnRzPw0KICAgIA0KDQojIyBNYW1tYWwgYnJhaW4gYW5kIGJvZHkgc2l6ZQ0KDQpMZXQncyBsb29rIGF0IHRoZXNlIGFzc3VtcHRpb25zIGluIGRldGFpbCB1c2luZyB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYnJhaW4gbWFzcyBhbmQgYm9keSBtYXNzIGZvciBkaWZmZXJlbnQgbWFtbWFscy4gVGhlIGRhdGFzZXQgaXMgY2FsbGVkIGBtYW1tYWxzYCBpbiB0aGUgIGBNQVNTYCBwYWNrYWdlLiAgDQpgYGB7ciBtYW1tYWwtYnJhaW5zLCBmaWcuY2FwID0gIlRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBtYW1tYWwgYm9keSBzaXplIGFuZCBicmFpbiBzaXplIn0NCmdncGxvdChtYW1tYWxzLCBhZXMoYm9keSwgYnJhaW4pKSArIGdlb21fcG9pbnQoKQ0KYGBgDQoNCg0KIyAxLiBOb3JtYWxpdHkNCg0KPiBQb3B1bGF0aW9uIFkgdmFsdWVzIGFuZCBlcnJvciB0ZXJtcyAoJFx2YXJlcHNpbG9uX2kkKSBhcmUgbm9ybWFsbHkgZGlzdHJpYnV0ZWQgZm9yIGVhY2ggbGV2ZWwgb2YgdGhlIHByZWRpY3RvciB2YXJpYWJsZSAoJHhfaSQpDQogIA0KVGhlIGRpc3RyaWJ1dGlvbiBvZiB0aGUgcmVzcG9uc2UgdmFyaWFibGUsIFksIHNob3VsZCBiZSBub3JtYWxseSBkaXN0cmlidXRlZCAobm90IHNrZXdlZCkuIFdlIGNhbiBncmFwaGljYWxseSBjaGVjayB0aGlzIHVzaW5nIGEgaGlzdG9ncmFtIG9mIGJyYWluIHNpemUuDQoNCmBgYHtyIG1hbW1hbC1oaXN0LCBvdXQud2lkdGg9IjUwJSIsIGZpZy5hbGlnbj0nZGVmYXVsdCd9DQpwYXIobWFyID0gYyg0LCA0LCA0LCAuMSkpDQpnZ3Bsb3QobWFtbWFscywgYWVzKGJyYWluKSkgKyBnZW9tX2hpc3RvZ3JhbSgpICsgZ2d0aXRsZSgiSXMgdGhpcyBhIG5vcm1hbCBkaXN0cmlidXRpb24/IikgIyBhbHNvIGhpc3QoKQ0KcGxvdChkbm9ybShzZXEoLTUwLDUwKSwgbWVhbiA9IDAsIHNkID0gMTUpLCB0eXBlID0gJ2wnLCBsd2QgPSA0LCBtYWluID0gIk5vcm1hbCBkaXN0cmlidXRpb24iLGF4ZXM9RkFMU0UsIHlsYWIgPSAiIiwgeGxhYiA9ICIiKQ0KYGBgDQoNCg0KIyMgUXVhbnRpbGUtUXVhbnRpbGUgcGxvdHMNCg0KKiBXZSBjYW4gYWxzbyB2aXN1YWxpc2UgdGhlIHNwcmVhZCBvZiBkYXRhIHdpdGggYSBxdWFudGlsZS1xdWFudGlsZSBwbG90Lg0KKiBUaGUgbGluZWFyIGxpbmUgaXMgdGhlIGV4cGVjdGVkIHJlbGF0aW9uc2hpcCBmb2xsb3dpbmcgYSBub3JtYWwgZGlzdHJpYnV0aW9uLg0KICAgICogRG8gb3VyIHBvaW50cyBmb2xsb3cgdGhlIGxpbmU/DQogICAgKiBXaGF0IGRvZXMgaXQgbWVhbiB3aGVuIHRoZSBwb2ludHMgZG9uJ3QgZm9sbG93IHRoZSBsaW5lPw0KDQpgYGB7ciwgbWFtbWFsLXF1YW50aWxlfQ0KZ2dwbG90KG1hbW1hbHMsIGFlcyhzYW1wbGU9YnJhaW4pKSArIA0KICBzdGF0X3FxKCkgKyANCiAgc3RhdF9xcV9saW5lKCkgKyAgIyBhbHNvIHFxbm9ybSgpDQogIHlsYWIoIkJyYWluIHNpemUiKQ0KYGBgDQoNCg0KIyMgVGhlIHJlc2lkdWFscyBvZiB0aGUgbW9kZWwgc2hvdWxkIGJlIGFsc28gbm9ybWFsbHkgZGlzdHJpYnV0ZWQgDQoNCmBgYHtyIHN0YW5kYXJkLCBmaWcuY2FwID0gIkxvb2tzIGxpa2UgZGlzdHJpYnV0aW9uIG9mIGJyYWluIHNpemUgaXMgc2tld2VkIHRvIHRoZSByaWdodC4gV2hhdCBkb2VzIHRoaXMgbWVhbiBiaW9sb2dpY2FsbHk/In0NCmxtX2JiIDwtIGxtKGJyYWluIH4gYm9keSwgbWFtbWFscykgIyBvdXIgbGluZWFyIG1vZGVsDQpnZ3Bsb3QobG1fYmIsIGFlcyhzYW1wbGUgPSByc3RhbmRhcmQobG1fYmIpKSkgKyANCiAgZ2VvbV9xcSgpICsgDQogIHN0YXRfcXFfbGluZSgpICsgIyBwbG90IHN0YW5kYXJkaXNlZCByZXNpZHVhbHMNCiAgeWxhYigiU3RhbmRhcmRpc2VkIHJlc2lkdWFscyIpDQpgYGANCg0KDQojIyBXaGF0IGhhcHBlbnMgd2hlbiB0aGUgZGF0YSBpcyBub3Qgbm9ybWFsPw0KDQoqIENvbGxlY3QgbW9yZSBkYXRhLCBpbmNyZWFzZSBzYW1wbGUgc2l6ZSBmb3IgZWFjaCBsZXZlbCBvZiAkeCQuIENvdWxkIGJlIGEgc2FtcGxpbmcgYmlhcyBvciBzYW1wbGUgc2l6ZSBpcyB0b28gbG93DQoqIFVzZSBhIG5vbi1wYXJhbWV0cmljIHRlc3QgDQogICAgICogZS5nLiBTcGVhcm1hbidzIFJhbmsgQ29ycmVsYXRpb24NCiogSWdub3JlIGl0ICh3aXRoIGdvb2QgcmVhc29uKS4gTGluZWFyIHJlZ3Jlc3Npb25zIGFyZSByb2J1c3QgdG8gc2tld25lc3MNCiogU29tZSBkYXRhIGFyZSBuZXZlciBub3JtYWwNCiAgICAgKiBlLmcuIGNvdW50cyAtIHNob3VsZCB1c2UgUG9pc3NvbiBkaXN0cmlidXRpb24NCiAgICAgKiBGaXQgYW5vdGhlciBzdGF0aXN0aWNhbCBtb2RlbCB3aXRoIG1vcmUgYXBwcm9wcmlhdGUgZXJyb3Igc3RydWN0dXJlcw0KKiBUcmFuc2Zvcm0gdGhlIGRhdGENCg0KIyMgQXBwbHlpbmcgYSB0cmFuc2Zvcm1hdGlvbg0KDQoqIFNvbWUgdHJhbnNmb3JtYXRpb25zOg0KICAgICAqIExvZyBvciBuYXR1cmFsIGxvZw0KICAgICAqIFNxdWFyZSByb290IG9yIGN1YmUgcm9vdA0KKiBOb3RlOiBgbG9nKDApYCBvciBgbG9nKC0xKWAgaXMgdW5kZWZpbmVkIHNvIHlvdSBjb3VsZCBtYWtlIGRhdGEgcG9zaXRpdmUgYW5kIGdyZWF0ZXIgdGhhbiAwIGJlZm9yZSB5b3UgbG9nIHRyYW5zZm9ybSB0aGVtLiANCiogTW9yZSBzb3BoaXN0aWNhdGVkIHRyYW5zZm9ybWF0aW9ucyBub3QgY292ZXJlZCBpbiB0aGlzIG1vZHVsZQ0KDQojIyBUcmFuc2Zvcm1pbmcgYnJhaW4gc2l6ZQ0KDQoqIExldCdzIHRyeSBzb21lIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGUgZGF0YQ0KKiBXaGF0IGlzIHRoZSB0cmFuc2Zvcm1hdGlvbiBkb2luZz8gDQoqIFdoaWNoIHdvdWxkIHlvdSBjaG9vc2U/DQoNCmBgYHtyIHRyYW5zZm9ybSwgZmlnLndpZHRoPTh9DQpwbG90X2dyaWQoDQogIGdncGxvdChtYW1tYWxzLCBhZXMoc2FtcGxlID0gKGJyYWluKSkpICsgc3RhdF9xcSgpICsgc3RhdF9xcV9saW5lKCkgKyBsYWJzKHRpdGxlPSJVbnRyYW5zZm9ybWVkIiksDQogIGdncGxvdChtYW1tYWxzLCBhZXMoc2FtcGxlID0gbG9nKGJyYWluKSkpICsgc3RhdF9xcSgpICsgc3RhdF9xcV9saW5lKCkgKyBsYWJzKHRpdGxlPSJsb2cxMCB0cmFuc2Zvcm1lZCIpLA0KIGdncGxvdChtYW1tYWxzLCBhZXMoc2FtcGxlID0gc3FydChicmFpbikpKSArIHN0YXRfcXEoKSArIHN0YXRfcXFfbGluZSgpICsgbGFicyh0aXRsZT0ic3F1YXJlIHJvb3QgdHJhbnNmb3JtZWQiKSwNCiBhbGlnbiA9ICdoJywgbmNvbCA9IDMpDQpgYGANCg0KDQojIyBSZS1ydW4gdGhlIG1vZGVsIHdpdGggdHJhbnNmb3JtZWQgZGF0YQ0KDQpgYGB7ciBuZXctZ3JhcGgsIGZpZy5jYXA9ICJUaGF0IGxvb2tzIGJldHRlciEifQ0KbG1fYmIgPC0gbG0obG9nKGJyYWluKSB+IGJvZHksIG1hbW1hbHMpICMgb3VyIGxpbmVhciBtb2RlbA0KZ2dwbG90KGxtX2JiLCBhZXMoc2FtcGxlID0gcnN0YW5kYXJkKGxtX2JiKSkpICsgDQogIGdlb21fcXEoKSArIA0KICBzdGF0X3FxX2xpbmUoKSArICMgcGxvdCBzdGFuZGFyZGlzZWQgcmVzaWR1YWxzDQogIHlsYWIoIlN0YW5kYXJkaXNlZCByZXNpZHVhbHMiKQ0KYGBgDQoNCklmIHlvdSB0cmFuc2Zvcm0gZGF0YSwgdGhlbiB0aGUgbW9kZWwgZXN0aW1hdGVzIHJlZmVyIHRvIHRoZSB0cmFuc2Zvcm1lZCB1bml0cy4gUmVtZW1iZXIgdG8gdHJhbmZvcm0gdGhlbSBiYWNrIHRvIHRoZWlyIGNvcnJlY3QgdW5pdHMuDQoNCiMgMi4gSG9tb2dlbmVpdHkgb2YgVmFyaWFuY2UNCg0KPiBQb3B1bGF0aW9uIFkgdmFsdWVzIGFuZCBlcnJvciB0ZXJtcyAoJFx2YXJlcHNpbG9uX2kkKSBoYXZlIHRoZSBzYW1lIHZhcmlhbmNlIGZvciBlYWNoIGxldmVsIG9mIHRoZSBwcmVkaWN0b3IgdmFyaWFibGUgKCR4X2kkKQ0KDQoqIFJlbGF0ZWQgdG8gdGhlIGFzc3VtcHRpb25zIG9mIE5vcm1hbGl0eSBidXQgbW9yZSBpbXBvcnRhbnQhDQoqIExvb2sgYXQgcGF0dGVybnMgaW4gc3RhbmRhcmRpc2VkIHJlc2lkdWFsczoNCiAgICAgKiBRdWFudGlsZSBwbG90DQogICAgICogUmVsYXRpb25zaGlwIHdpdGggZml0dGVkIHZhbHVlcyAocHJlZGljdGVkIFkgdmFsdWVzIGZyb20gbGluZSkNCg0KQ2F1c2VzOg0KDQoqIHNtYWxsIHNhbXBsZSBzaXplDQoqIG91dGxpZXJzDQoqIG5vbi1ub3JtYWxseSBkaXN0cmlidXRlZCB2YXJpYWJsZXMNCg0KRml4ZXM6ICANCg0KKiBIYXZlIHByb3Blcmx5IGRlc2lnbmVkIGV4cGVyaW1lbnRzICANCiogQ29sbGVjdCBlbm91Z2ggZGF0YSAgDQoqIERlYWwgd2l0aCBpdCBsaWtlIGFzIG5vcm1hbGl0eQ0KDQojIyBTaG91bGQgZXhwZWN0IGEgKipub3JtYWwgZGlzdHJpYnV0aW9uKiogb2Ygc3RhbmRhcmRpc2VkIHJlc2lkdWFscyANCg0KYGBge3IgcXFub3JtcmVzaWQsIGZpZy5jYXA9ICJkYXRhIGZhbGxzIGFsb25nIGxpbmUgPSBnb29kIn0NCnBhcihtYXIgPSBjKDQsNCwyLDAuMSkpDQpwbG90KGxtKGxvZyhicmFpbikgfiBsb2coYm9keSksIG1hbW1hbHMpICwgd2hpY2g9YygyKSkNCmBgYA0KDQojIyBBcmUgdGhlcmUgdHJlbmRzIGluIHRoZSByZXNpZHVhbCB2cyBmaXR0ZWQgdmFsdWVzPw0KDQpFeHBlY3Qgbm8gcmVsYXRpb25zaGlwIGJldHdlZW4gc3RhbmRhcmRpc2VkIChvciBub24tc3RhbmRhcmRpc2VkKSByZXNpZHVhbHMgYW5kIGZpdHRlZCB2YWx1ZXMgb2YgbW9kZWwNCg0KKiBzdHJhaWdodCBsaW5lID0gZ29vZA0KKiBubyBodW1wcyBvciB2YWxsZXlzDQoNCmBgYHtyIHJlc2lkLCBmaWcud2lkdGg9OCwgZmlnLmhlaWdodD00fQ0KcGFyKG1mcm93PWMoMSwyKSkNCnBsb3QobG0oKGJyYWluKSB+IGJvZHksIG1hbW1hbHMpICwgd2hpY2g9YygzKSwgbWFpbiA9ICJ1bnRyYW5zZm9ybWVkIikNCnBsb3QoIGxtKGxvZyhicmFpbikgfiBsb2coYm9keSksIG1hbW1hbHMpICwgd2hpY2g9YygzKSwgbWFpbiA9ICJ0cmFuc2Zvcm1lZCIpDQpgYGANCg0KIyAzLiBJbmRlcGVuZGVuY2UNCg0KPiBQb3B1bGF0aW9uIFkgdmFsdWVzIGFuZCBlcnJvciB0ZXJtcyAoJFx2YXJlcHNpbG9uX2kkKSBhcmUgaW5kZXBlbmRlbnQNCg0KKiBUaGV5IGRvIG5vdCBpbmZsdWVuY2UgZWFjaCBvdGhlciAobm90IGF1dG9jb3JyZWxhdGVkKQ0KKiBPZnRlbiBiZWNhdXNlIG9mIGluYXBwcm9wcmlhdGUgZXhwZXJpbWVudGFsIGRlc2lnbg0KICAgICogdGltZSBzZXJpZXMNCiAgICAqIHBzZXVkby1yZXBsaWNhdGlvbg0KICAgICogcmVwZWF0ZWQgbWVhc3VyZW1lbnRzDQoqIEluY3JlYXNlcyBUeXBlIEkgZXJyb3INCg0KDQojIyBEZWFsaW5nIHdpdGggaW5kZXBlbmRlbmNlDQoNCkJlc3QgdGhpbmcgaXMgdG8gY2hvb3NlIGEgZGlmZmVyZW50IG1vZGVsICANCkNvbnNpZGVyIHVzaW5nIHJhbmRvbSBlZmZlY3RzIG1vZGVscyBvciBjaG9vc2luZyBiZXR0ZXIgdmFyaWFibGVzIChpLmUuIGdvb2QgZXhwZXJpbWVudGFsIGRlc2lnbikNCg0KIyA0LiBGaXhlZCBYDQoNCj4gVGhlIHByZWRpY3RvciB2YXJpYWJsZSAoJHhfaSQpIGlzIGZpeGVkLiBpLmUuIGEga25vd24gY29uc3RhbnQNCg0KQ2FsbGVkIFR5cGUgSSBtb2RlbCBvciBmaXhlZCBlZmZlY3RzIG1vZGVsICANCg0KKiBPZnRlbiBicm9rZW4gaW4gYmlvbG9naWNhbCBzdGF0cw0KKiBQcmVkaWN0b3IgdmFyaWFibGVzIGNhbiBiZSByYW5kb20NCiAgICAqIENhbGxlZCBUeXBlIElJIChyYW5kb20gZWZmZWN0cyBtb2RlbCkNCiogSHlwb3RoZXNpcyB0ZXN0aW5nIG9mIFR5cGUgSSBhcHBsaWVzIHRvIFR5cGUgSUkNCg0KKioqIA0KDQoNCiMgT3RoZXIgcmVncmVzc2lvbiBkaWFnbm9zdGljcw0KDQoqIEhvdyB3ZWxsIGRvZXMgdGhlIG1vZGVsIGZpdCB0aGUgZGF0YT8NCiAgICAgKiBDb2VmZmljaWVudCBvZiBkZXRlcm1pbmF0aW9uICRSXjIkDQoqIElzIGEgc2ltcGxlIGxpbmVhciByZWdyZXNzaW9uIGFwcHJvcHJpYXRlPw0KICAgICogZS5nLiBwb2x5bm9taWFsIG9yIGN1cnZpbGluZWFyIG1vZGVsDQoqIEFyZSB0aGVyZSBlZmZlY3RzIG9mIG91dGxpZXJzIGluIHRoZSBtb2RlbD8NCg0KIyMgT3V0bGllcnMsIGxldmVyYWdlIGFuZCBpbmZsdWVuY2UNCg0KPiBPdXRsaWVycyBhcmUgYWJub3JtYWwgb3IgdW51c3VhbCBvYnNlcnZhdGlvbnMgcmVsYXRpdmUgdG8gdGhlIHJlc3Qgb2YgdGhlIGRhdGEgdGhhdCBjYW4gY2F1c2UgYmlhc2VzIGR1cmluZyBhbmFseXNpcw0KDQoqIE91dGxpZXJzIGNhbiBiZSBjaGVja2VkIGJlZm9yZSBhcHBseWluZyBhIG1vZGVsLiBIb3c/DQoqIFNvbWV0aW1lcyBjYXVzZWQgYnkgZXhwZXJpbWVudGFsIGVycm9yIGJ1dCBzb21ldGltZXMgc2lnbmlmaWNhbnRseSBkaWZmZXJlbnQgZGF0YSBwb2ludHMgYXJlIG5vdCBvdXRsaWVycw0KICAgICogTmF0dXJhbCB2YXJpYXRpb24NCiogTGV2ZXJhZ2UgPSBob3cgbXVjaCB4IGluZmx1ZW5jZXMgeQ0KKiBJbmZsdWVuY2UgPSBob3cgbXVjaCB4IGluZmx1ZW5jZXMgdGhlIHNsb3BlIG9mIHRoZSBsaW5lIChDb29rJ3MgRGlzdGFuY2UpDQoNCklmIG91dGxpZXJzIGFyZSBjYXVzZWQgYnkgZXhwZXJpbWVudGFsIGVycm9yIG9yIGJpYXMsIHlvdSBjb3VsZCBqdXN0aWZ5IGV4Y2x1ZGluZyBpdCBmcm9tIGRhdGEuICANCioqQnV0IF9uZXZlcl8gZGVsZXRlIG9ic2VydmF0aW9ucyB0byBmb3JjZSBhIGJldHRlciBtb2RlbCBmaXQqKg0KDQoNCiMjIE91dGxpZXJzIGluIHRoZSBtYW1tYWwgZGF0YXNldA0KDQpgYGB7ciBvdXRsaWVycywgZmlnLmNhcD0gIkxvb2tzIGxpa2UgaHVtYW5zLCB3YXRlciBvcG9zc3VtcyAmIG11c2sgc2hyZXcgaGF2ZSBoaWdoIGluZmx1ZW5jZSBvbiB0aGUgcmVncmVzc2lvbiJ9DQpwYXIobWFyID0gYyg0LDQsMiwwLjEpKQ0KcGxvdChsbShsb2coYnJhaW4pIH4gbG9nKGJvZHkpLCBtYW1tYWxzKSAsIHdoaWNoPWMoNSkpDQpgYGANCg0KKioqDQoNCiMgUHV0dGluZyBpdCBhbGwgdG9nZXRoZXINCg0KVGhlc2UgYXNzdW1wdGlvbnMgY2FuIGJlIGNoZWNrZWQgYnkgbG9va2luZyBhdCB0aGUgcmVzaWR1YWwgcGxvdHMuIFIgc2hvd3MgcmVzaWR1YWwgcGxvdHMgdXNpbmcgdGhlIGZ1bmN0aW9uIGBwbG90KGxtKCkpYC4NCg0KYGBge3IgcmVzaWR1YWwtcGxvdCwgZmlnLmhlaWdodD03LCBmaWcud2lkdGg9OH0NCnBhcihtZnJvdz1jKDIsMiksIG1hciA9IGMoNCw0LDIsMC4xKSkNCnBsb3QobG0obG9nKGJyYWluKSB+IGxvZyhib2R5KSwgbWFtbWFscykpDQpgYGANCg0KTGV0J3MgZXZhbHVhdGUgdGhlIHJlc2lkdWFsIHBsb3QsIHN0YXJ0aW5nIGZyb20gdGhlIHRvcCBsZWZ0Og0KDQoqIEFyZSB0aGUgcmVzaWR1YWxzIHZzIGZpdHRlZCB2YWx1ZXMgZXF1YWwgKGkuZS4gYSBzdHJhaWdodCBsaW5lKT8gSWYgdGhlcmUgYXJlIGh1bXBzIG9yIHZhbGxleXMsIHRoZSBtb2RlbCBtYXkgbm90IGJlIGFwcHJvcHJpYXRlIGZvciB0aGUgZGF0YS4NCiogQXJlIHRoZSBzdGFuZGFyZGlzZWQgcmVzaWR1YWxzIG5vcm1hbGx5IGRpc3RyaWJ1dGVkPyBMaW5lYXIgbW9kZWxzIGFzc3VtZSB0aGF0IHJlc2lkdWFscyBhcmUgbm9ybWFsbHkgZGlzdHJpYnV0ZWQuIElmIG5vdCwgeW91ciBtb2RlbCBpcyBpbmFwcHJvcHJpYXRlIGZvciB5b3VyIGRhdGEgb3IgeW91ciBkYXRhIGlzIHNrZXdlZCBpbiBzb21lIHdheS4NCiogSXMgdGhlcmUgYSBwYXR0ZXJuIHRvIHlvdXIgJFxzcXJ0e1xtYm94e1N0YW5kYXJkaXNlZCByZXNpZHVhbHN9fSQ/IExpbmVhciBtb2RlbHMgYXNzdW1lIGVxdWFsIHZhcmlhbmNlIHNvIHRoZXJlIHNob3VsZCBiZSBubyBwYXR0ZXJuIGluIHlvdXIgcmVzaWR1YWxzLg0KKiBBcmUgdGhlcmUgYW55IG91dGxpZXIgZGF0YSBwb2ludHMgdGhhdCBoYXZlIHN0cm9uZyBsZXZlcmFnZSBpbiB0aGUgbW9kZWw/IEUuZy4gcG90ZW50aWFsIG91dGxpZXJzIG9yIGluZmx1ZW50aWFsIGRhdGEgcG9pbnRzLg0KDQoqKioNCg0KIyBBTkNPVkENCg0KUmVtZW1iZXIgQW5hbHlzaXMgb2YgQ292YXJpYW5jZSBkZWFscyB3aXRoIHRoZSBlZmZlY3Qgb2YgdHdvIHByZWRpY3RvciB2YXJpYWJsZSwgYSBjb250aW51b3VzIGFuZCBjYXRlZ29yaWNhbCB2YXJpYWJsZSwgb24gYSBjb250aW51b3VzIHJlc3BvbnNlIHZhcmlhYmxlLiBMaWtlIGFuIEFOT1ZBIGFkanVzdGVkIGZvciB0aGUgZWZmZWN0IG9mIGFuIGFkZGl0aW9uYWwgY29udGludW91cyBjb3ZhcmlhdGUuICANCkZvbGxvd3MgYWxsIHRoZSBhc3N1bXB0aW9ucyBhYm92ZSAqcGx1cyB0d28gZXh0cmEgb25lcyo6IA0KDQojIyAxLiBDb3ZhcmlhdGUgdmFsdWVzIGNvdmVyIGEgc2ltaWxhciByYW5nZSBhY3Jvc3MgZ3JvdXBzDQoNCkRhdGEgZnJvbSBncm91cHMgc2hvdWxkIG92ZXJsYXAgYWNyb3NzIHRoZSByYW5nZSBvZiB0aGUgY29udGludW91cyB2YXJpYWJsZQ0KDQpgYGB7ciBhbmNvdmEsIGZpZy5zaG93PSdob2xkJywgZmlnLmNhcCA9ICJXaGljaCBvZiB0aGVzZSB2aW9sYXRlcyBBTkNPVkEgYXNzdW1wdGlvbnM/IiwgZmlnLmFsaWduPSdkZWZhdWx0Jywgb3V0LndpZHRoPSI1MCUifQ0KZ2dwbG90KG5hLm9taXQoc3VydmV5KSwgYWVzKFdyLkhuZCwgSGVpZ2h0LCBjb2xvdXIgPSBTZXgpKSArDQogIGdlb21fcG9pbnQoKSArDQogIHhsYWIoIkhhbmQgd2lkdGgiKSAgKw0KICB0aGVtZShsZWdlbmQucG9zaXRpb24gPSAiYm90dG9tIikgKw0KICBnZ3RpdGxlKCJIZWlnaHQgb2Ygc3R1ZGVudHMiKQ0KDQpkaWFtb25kcyAlPiUgDQogIGZpbHRlcihjYXJhdCA8MC44KSAlPiUNCiAgZmlsdGVyKGNhcmF0ID4wLjYpICU+JQ0KICBmaWx0ZXIoY29sb3IgJWluJSBjKCJEIiwgIkciLCAiSiIpKSAlPiUgDQpnZ3Bsb3QoYWVzKGNhcmF0LCBwcmljZSwgY29sb3VyID0gY29sb3IpKSArDQogIGdlb21faml0dGVyKHdpZHRoID0gMC4xLCBzaGFwZSA9IDE2KSArDQogIHRoZW1lKGxlZ2VuZC5wb3NpdGlvbiA9ICJib3R0b20iKSArDQogIGdndGl0bGUoIlByaWNlIG9mIGRpYW1vbmRzIikNCmBgYA0KDQoNCklmIHRoZSBmaXJzdCBhc3N1bXB0aW9uIGlzIG5vdCBtZXQsIEFOQ09WQSBmYWlscyB0byBzZXBhcmF0ZSB0aGUgZWZmZWN0cyBvZiB0aGUgdHdvIHByZWRpY3RvcnMgb24gdGhlIHJlc3BvbnNlIHZhcmlhYmxlLg0KICANCkV4dGVuZGluZyByZWdyZXNzaW9uIG1vZGVscyBiZXlvbmQgdGhlIHJhbmdlIG9mIGRhdGEgY291bGQgYmUgKmV4dHJhcG9sYXRpb24qIGFuZCBsZWFkIHRvIGluY29ycmVjdCBjb25jbHVzaW9ucy4NCg0KIyMgMi4gUmVncmVzc2lvbiBzbG9wZXMgYXJlIHNpbWlsYXIgYWNyb3NzIGdyb3Vwcw0KDQpMaWtlIGEgZml4ZWQgb3IgYWRkaXRpdmUgbGluZWFyIHJlZ3Jlc3Npb24uICANCklmIHRoZSBzZWNvbmQgYXNzdW1wdGlvbiBpcyBub3QgbWV0LCB5b3UgY2FuIHN0aWxsIGZpdCBhbiDigJxBTkNPVkEtbGlrZeKAnSBtb2RlbCB0byB0aGUgZGF0YSB3aXRoIGRpZmZlcmVudCBzbG9wZXMgZm9yIGRpZmZlcmVudCBncm91cHMgKGkuZS4gYSBtaXhlZCBvciByYW5kb20gbW9kZWwpLiBUaGVuIGl0J3Mgbm90IGEgdHJ1ZSBBTkNPVkEgaW4gdGhlIGNsYXNzaWMgc2Vuc2UuDQoNCioqKg0KDQojIFNvbWUgZGF0YSBhcmUgbmV2ZXIgbm9ybWFsDQoNCiogTm9uLWxpbmVhciBkYXRhIC0gZS5nLiBleHBvbmVudGlhbCBncm93dGggb2YgYmFjdGVyaWEsIGh1bWFuIHBvcHVsYXRpb25zDQoqIENvdW50cyBvciBwcm9wb3J0aW9ucywgbnVtYmVyIG9mIGNlbGxzIGluIHBldHJpIGRpc2gsIHByb3BvcnRpb24gb2YgYW5pbWFscyB0aGF0IHN1cnZpdmUNCiogQ2F0ZWdvcmljYWwgZGF0YQ0KDQpTaW1wbGUgbGluZWFyIHJlZ3Jlc3Npb25zIGFyZW4ndCB0aGUgbW9zdCBhcHByb3ByaWF0ZSBmb3IgdGhlc2UgZGF0YSBhbmQgbWF5IGdpdmUgZGlzdG9ydGVkIHJlc3VsdHMuICANCipCdXQqIHdlIGNhbiB1c2UgbGluZWFyIHJlZ3Jlc3Npb24gdG8gYW5hbHlzZSB0aGVzZSBkYXRhIGlmIHdlIHJlbGF4IG91ciBhc3N1bXB0aW9ucyBhIGJpdC4uLmNhbGxlZCAiZ2VuZXJhbCBsaW5lYXIgbW9kZWxzIg0KDQojIEdlbmVyYWxpc2VkIGxpbmVhciBtb2RlbHMNCg0KPiAqR2VuZXJhbCBsaW5lYXIgbW9kZWxzKiwgb3IganVzdCBsaW5lYXIgbW9kZWxzIChMTSksIHJlZmVyIHRvIGxpbmVhciByZWdyZXNzaW9uIG9mIGRhdGEgZm9sbG93aW5nIGEgbm9ybWFsIHByb2JhYmlsaXR5IGRpc3RyaWJ1dGlvbiwgZml4ZWQgb3IgcmFuZG9tLiBJZiB3ZSBkbyBhIGxpbmVhciByZWdyZXNzaW9uIG9uIGJhc2VkIG9uIGEgbm9uLW5vcm1hbCBwcm9iYWJpbGl0eSBkaXN0cmlidXRpb24gdGhhdCdzIGNhbGxlZCBhIF9nZW5lcmFsKippc2VkKiogbGluZWFyIG1vZGVsXyAodXN1YWxseSBhYmJyZXZpYXRlZCB0byBHTE0pLiAgDQoNClRoZXJlIGFyZSBtYW55IHR5cGVzIGJ1dCB3ZSB3aWxsIGJyaWVmbHkgZGVzY3JpYmUgdHdvIGNvbW1vbiBwcm9iYWJpbGl0eSBkaXN0cmlidXRpb25zOiAgDQoNCiogQmlub21pYWwgcmVncmVzc2lvbiAtIGZvciBiaW5vbWlhbCBkYXRhIGZvbGxvd2luZyBhIGJpbm9taWFsIGRpc3RyaWJ1dGlvbg0KICAgICogeWVzL25vDQogICAgKiBhbGl2ZS9kZWFkDQoqIFBvaXNzb24gcmVncmVzc2lvbiAtIGZvciBjb3VudCBvciBjb250aW5nZW5jeSB0YWJsZSBkYXRhIGZvbGxvd2luZyBhIFBvaXNzb24gZGlzdHJpYnV0aW9uDQoNCkluIGBSYCBHTE1zIGFyZSBkb25lIHVzaW5nIGBnbG0oWSB+IFggKiBBLCBkYXRhLCBmYW1pbHkgPSA8aW5zZXJ0IGhlcmU+KWAuIGBGYW1pbHlgIHJlZmVycyB0byB0aGUgdW5kZXJseWluZyBwcm9iYWJpbGl0eSBkaXN0cmlidXRpb24uIFVzaW5nIGBmYW1pbHkgPSBnYXVzc2lhbmAgaXMgdGhlIHNhbWUgYXMgYGxtKClgIGZvciBhIG5vcm1hbCBkaXN0cmlidXRpb24uIFNvOg0KDQoqIGBwb2lzc29uYCBmb3IgYSBQb2lzc29uIGRpc3RyaWJ1dGlvbg0KKiBgYmlub21pYWxgIGZvciBhIGJpbm9taWFsIGRpc3RyaWJ1dGlvbg0KDQpCdXQgdGhlIG1vZGVsIG91dHB1dHMgYXJlIGludGVycHJldGVkIGRpZmZlcmVudGx5IHRvIG5vcm1hbCBkaXN0cmlidXRpb25zIGJlY2F1c2UgdGhleSAqbGluayogdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSBwcmVkaWN0b3IgYW5kIHRoZSByZXNwb25zZSBkaWZmZXJlbnRseS4NCg0KIyMgUG9pc3NvbiByZWdyZXNzaW9uDQoNCiogVXNlcyBhIGxvZyBsaW5lYXIgbGluayBmdW5jdGlvbiB3aGVyZSB0aGUgcmVzcG9uc2UgdmFyaWFibGUgKGNvdW50cykgaXMgb24gYSBsb2cgc2NhbGUNCiogSW50ZXJwcmV0YXRpb24gaXMgc2ltaWxhciB0byBsbSB3aXRoIGVzdGltYXRlcyBmb3IgdGhlIGludGVyY2VwdCwgc2xvcGVzIGFuZCBkaWZmZXJlbmNlcyBpbiBlc3RpbWF0ZXMgYW1vbmcgZ3JvdXBzDQogICAgKiBFc3RpbWF0ZXMgYXJlIHRoZSAqKmxvZyBvZiB0aGUgZXhwZWN0ZWQgY291bnQqKiBhcyBhIGZ1bmN0aW9uIG9mIHRoZSBwcmVkaWN0b3IgdmFyaWFibGVzDQogICAgKiBDYW5ub3QgaGF2ZSBuZWdhdGl2ZSBvciAwIHZhbHVlcw0KKiBUZXN0IG92ZXJhbGwgZWZmZWN0cyBvZiBwcmVkaWN0b3JzIGJ5IGNvbXBhcmluZyBtb2RlbHMgd2l0aCBkaWZmZXJlbnQgcHJlZGljdG9ycyByZXByZXNlbnRpbmcgbnVsbCBhbmQgYWx0ZXJuYXRpdmUgaHlwb3RoZXNlcw0KKiBTZWUgbGF0ZXIgbGVjdHVyZXMgYWJvdXQgJFxjaGleMiQgdGVzdHMuDQoNCiMjIyBOdW1iZXIgb2YgT3lzdGVyY2F0Y2hlcnMgKHdldGxhbmQgYmlyZHMpIGluIFNvdXRoIEFmcmljYQ0KRGF0YSBpcyBgd2FkZXJzYCBmcm9tIGBNQVNTYC4gSSBoYXZlIG1hbml1cGxhdGVkIHRoZSBkYXRhIHNvIGl0IGlzIHN1aXRhYmxlIGZvciBhbmFseXNpcyAtIGNvZGUgYmVsb3cuDQoNCmBgYHtyIHdhZGVycywgZWNobyA9IFRSVUV9DQojIGNyZWF0ZSBkYXRhIHNldCBvZiBveXN0ZXJjYXRjaGVyIGNvdW50cyAoY29sdW1uIDEpIGFuZCBzaXRlIGxhYmVscw0Kd2FkZXJzIDwtIGRhdGEuZnJhbWUoT3lzdGVyY2F0Y2hlciA9IE1BU1M6OndhZGVyc1ssMV0sDQogICAgICAgICAgICAgICAgICAgICBzaXRlID0gbGV0dGVyc1sxOjE1XSkNCiMgcG9pc3NvbiByZWdyZXNzaW9uDQpzdW1tYXJ5KGdsbShPeXN0ZXJjYXRjaGVyICsgMSB+IHNpdGUsIHdhZGVycywgZmFtaWx5ID0gcG9pc3NvbikpDQpgYGANCg0KV2h5IGRpZCBJIGFkZCAxIHRvIHRoZSB2YXJpYWJsZSBPeXN0ZXJjYXRjaGVyIGluIHRoZSBwb2lzc29uIHJlZ3Jlc3Npb24/DQpgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIGV2YWwgPSBGQUxTRSwgZWNobyA9IFRSVUV9DQoxIGlzIGEgZHVtbXkgdmFyaWFibGUgdG8gcmVtb3ZlIDBzIGZyb20gdGhlIGNvdW50cyAtIG9yIGxvZygwKSB3aWxsIG1lc3MgdXAgdGhlIGVzdGltYXRpb24gb2YgcGFyYW1ldGVycw0KYGBgDQoNCldoYXQgaXMgdGhlIGxpbmsgZnVuY3Rpb24gZm9yIGEgcG9pc3NvbiByZWdyZXNzaW9uPw0KYGBge3IsIGNsYXNzLnNvdXJjZSA9ICdmb2xkLWhpZGUnLCBldmFsID0gRkFMU0UsIGVjaG8gPSBUUlVFfQ0KKG5hdHVyYWwpIGxvZyBsaW5rDQpgYGANCg0KV2hhdCBpcyB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIE95c3RlcmNhdGNoZXJzIGF0IHNpdGUgaz8NCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJywgZXZhbCA9IEZBTFNFLCBlY2hvID0gVFJVRX0NCjQ3NCBveXN0ZXJjYXRjaGVycw0KDQpSZW1lbWJlciBpbiBsaW5lYXIgcmVncmVzc2lvbiAoYW5kIGJ5IGV4dGVuc2lvbiBHTE1zKSB0aGUgSW50ZXJjZXB0IGVzdGltYXRlIGlzIHRoZSBlc3RpbWF0ZWQgY29lZmZpY2llbnQgZm9yIHRoZSBmaXJzdCBzaXRlIChzaXRlIGEpIGFuZCB0aGUgcmVzdCBhcmUgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBzaXRlIGEgYW5kIHRoZSByZXNwZWN0aXZlIHNpdGUuIFNvIGZvciBzaXRlIGsgeW91IG5lZWQgdG8gYWRkIHRoZSBlc3RpbWF0ZWQgY29lZmZpY2llbnRzIHRvZ2V0aGVyLg0KDQpDb2VmZmljaWVudCBmb3IgazogIDIuNTY0OSArIDMuNTk4NCA9IDYuMTYzMw0KQnV0IHJlbWVtYmVyIHRoaXMgaXMgbG9nIGNvdW50cyBzbyB5b3UgbmVlZCB0byB0cmFuc2Zvcm0gaXQgYmFjayB0byByZWd1bGFyIGNvdW50czoNCiAgZXhwKDYuMTYzMykgPSA0NzQuOTkzDQpUaGVuIHJlbWVtYmVyIHdlIGFkZGVkIGEgZHVtbXkgdmFyaWFibGUgc28geW91IG5lZWQgdG8gc3VidHJhY3QgdGhhdCBmcm9tIG91ciBlc3RpbWF0ZToNCiAgNDc0Ljk5MyAtIDEgPSA0NzMuOTkzIHdoaWNoIHJvdW5kZWQgdG8gdGhlIG5lYXJlc3Qgd2hvbGUgbnVtYmVyIChhcyBjb3VudHMgYXJlIGRpc2NyZXRlIHZhcmlhYmxlcykgaXMgNDc0IQ0KYGBgDQoNCiMjIEJpbm9taWFsIChsb2dpc3RpYykgcmVncmVzc2lvbg0KDQoqIFVzZXMgYSBsb2dpdCBsaW5rIGZ1bmN0aW9uIHNvIHRoZSByZXNwb25zZSB2YXJpYWJsZSBpcyB0aGUgKipsb2cgb2RkcyoqIA0KKiBFc3RpbWF0ZXMgYXJlIGxvZyBvZGRzIGFuZCB0aGUgcHJvYmFiaWxpdHkgb2YgYW4gZXZlbnQNCiAgICAqIEludGVyY2VwdCBpcyBsb2cgb2RkcyBvZiBmaXJzdCBncm91cA0KICAgICogRXN0aW1hdGVzIGZvciBvdGhlciBncm91cHMgYXJlIHRoZSByYXRpbyBvZiBsb2cgb2Rkcw0KICAgICogVHJhbnNmb3JtIGZyb20gbG9nIG9kZHMgdG8gb2RkcyB1c2luZyBgZXhwKClgDQoNCldoYXQgaXMgdGhlIGZ1bmN0aW9uIHRvIGNvbmR1Y3QgYW4gUG9pc3NvbiByZWdyZXNzaW9uIGluIFI/DQpgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIGV2YWwgPSBGQUxTRSwgZWNobyA9IFRSVUV9DQpnbG0oWSB+IFgsIGRhdGEsIGZhbWlseSA9IHBvaXNzb24pDQpgYGANCg0KIyMjIE1lbGFub21hIHR1bW9yIHRoaWNrbmVzcyBhbmQgc3Vydml2YWwNCkRhdGEgaXMgYE1lbGFub21hYCBmcm9tIGBNQVNTYC4gSSBoYXZlIG1hbml1cGxhdGVkIHRoZSBkYXRhIHNvIGl0IGlzIHN1aXRhYmxlIGZvciBhbmFseXNpcyAtIGNvZGUgYmVsb3cuDQpgYGB7ciBNZWxhbm9tYSwgZWNobyA9IFRSVUV9DQojIGNyZWF0ZSBkYXRhIHNldCBvZiBveXN0ZXJjYXRjaGVyIGNvdW50cyAoY29sdW1uIDEpIGFuZCBzaXRlIGxhYmVscw0KTWVsYW5vbWEgPC0gc3Vic2V0KE1lbGFub21hLCBNZWxhbm9tYSRzdGF0dXMgIT0gMykgIyByZW1vdmUgb2JzZXJ2YXRpb25zIG9mIG90aGVyIGNhdXNlcyBvZiBkZWF0aA0KTWVsYW5vbWEkc3RhdHVzIDwtIE1lbGFub21hJHN0YXR1cyAtIDEgIyBjcmVhdGUgYmluYXJ5IHZhcmlhYmxlczogMCA9IGRpZWQsIDEgPSBhbGl2ZQ0KDQojIGJpbmFyeSByZWdyZXNzaW9uDQptb2RlbCA8LSBnbG0oc3RhdHVzIH4gdGhpY2tuZXNzLCBNZWxhbm9tYSwgZmFtaWx5ID0gYmlub21pYWwpDQpzdW1tYXJ5KG1vZGVsKQ0KcGxvdChzdGF0dXMgfiB0aGlja25lc3MsIE1lbGFub21hLCBwY2ggPSAxOSkgIyBwbG90DQojIHBsb3QgYmlub21pYWwgcmVncmVzc2lvbiBpbiBibHVlDQpuZXdkYXQgPC0gZGF0YS5mcmFtZSh0aGlja25lc3M9c2VxKG1pbihNZWxhbm9tYSR0aGlja25lc3MpLCBtYXgoTWVsYW5vbWEkdGhpY2tuZXNzKSxsZW49MTAwKSkNCm5ld2RhdCRzdGF0dXMgPC0gcHJlZGljdChtb2RlbCwgbmV3ZGF0YT1uZXdkYXQsIHR5cGU9InJlc3BvbnNlIikNCmxpbmVzKHN0YXR1cyB+IHRoaWNrbmVzcywgbmV3ZGF0LCBjb2w9ImJsdWUiLCBsd2Q9MikNCmBgYA0KDQpJcyB0aGVyZSBhIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIE1lbGFub21hIHR1bW9yIHRoaWNrbmVzcyAobW0pIGFuZCB3aGV0aGVyIGEgcGF0aWVudCBzdXJ2aXZlcz8NCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJywgZXZhbCA9IEZBTFNFLCBlY2hvID0gVFJVRX0NClllcy4gVGhlIHRoaWNrZXIgdGhlIHR1bW91ciwgdGhlIGdyZWF0ZXIgdGhlIG9kZHMgb2YgZGVhdGguIFRoZSBQIHZhbHVlIG9mIHRoZSBzbG9wZSBvZiB0aGUgYmlub21pYWwgcmVncmVzc2lvbiBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCBmcm9tIDAuIFAgPCAwLjAwMS4NCmBgYA0KDQpXaGF0IGRvZXMgdGhlIGNvZWZmaWNpZW50IGVzdGltYXRlIG9mIGAtMC4yNDg1M2AgZm9yIHRoZSB2YXJpYWJsZSBgdGhpY2tuZXNzYCByZXByZXNlbnQ/DQpgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIGV2YWwgPSBGQUxTRSwgZWNobyA9IFRSVUV9DQpUaGUgZXN0aW1hdGUgcmVwcmVzZW50cyB0aGUgbG9nIG9kZHMgb2Ygc3Vydml2YWwgYXMgYSBmdW5jdGlvbiBvZiB0dW1vdXIgdGhpY2tuZXNzLiBJbiBvdGhlciB3b3Jkcywgd2UgZXhwZWN0IHRoZSBsb2cgb2RkcyBvZiBzdXJ2aXZhbCB0byBkZWNyZWFzZSBieSAwLjI1IGZvciBhIDEgbW0gaW5jcmVhc2UgaW4gdHVtb3VyIHRoaWNrbmVzcy4gDQoNCldlIGNhbiB0cmFuc2Zvcm0gbG9nIG9kZHMgdG8gb2RkcyBieSB0YWtpbmcgdGhlIGV4cG9uZW50aWFsOiBleHAoLTAuMjQ4NTMpID0gMC43Nzk5NDY1LiAxIC0gMC43Nzk5NDY1ID0gMC4yMiwgc28gZm9yIGV2ZXJ5IDEgbW0gaW5jcmVhc2UgaW4gdHVtb3VyIHRoaWNrbmVzcyB3ZSBleHBlY3QgdGhlIG9kZHMgb2Ygc3Vydml2YWwgdG8gZGVjcmVhc2UgYnkgMjIgJQ0KYGBgDQoNCldoYXQgaXMgdGhlIHByb2JhYmlsaXR5IG9mIHN1cnZpdmFsIHdpdGggYSB0dW1vciA1IG1tIHRoaWNrPw0KYGBge3IsIGNsYXNzLnNvdXJjZSA9ICdmb2xkLWhpZGUnLCBldmFsID0gRkFMU0UsIGVjaG8gPSBUUlVFfQ0KVGhlIGxvZ2l0IGZvcm11bGEgaXMgbG9naXQgPSBwLygxLXApIGFuZCB0aGUgcmVncmVzc2lvbiBlcXVhdGlvbiBpcyBsb2dpdChwKSA9IDEuNjExMzQgLSAwLjI0ODUzICogdGhpY2tuZXNzDQpzbyBsb2dpdChwKSA9ICAxLjYxMTM0IC0gMC4yNDg1MyAqIDUgPSAwLjM2ODY5DQoNCmFuZCB0byB0dXJuIGxvZ2l0IHAgaW50byBwcm9iYWJpbGl0eSAocCk6DQpwID0gZXhwKGxvZ2l0KHApKS8oMSArIGV4cChsb2dpdChwKSkpDQogID0gZXhwKDAuMzY4NjkpLygxICsgZXhwKDAuMzY4NjkpKQ0KICA9IDAuNTkxMTQyNA0KDQpUaGUgcHJvYmFiaWxpdHkgb2Ygc3Vydml2aW5nIGlzIDU5ICUNCmBgYA0KDQpXZWFyIHN1bmNyZWVlbiENCg0KKioqDQoNCiMgVGFrZSBob21lIG1lc3NhZ2VzDQoNCiogQWx3YXlzIGNoZWNrIGFzc3VtcHRpb25zDQoqIEludGVycHJldCBtb2RlbCBpbiBhIGJpb2xvZ2ljYWwgY29udGV4dA0KICAgICogQmlvbG9naWNhbCBkYXRhIGlzIG1lc3N5OiBnb29kIG1vZGVsIGNhbiBoYXZlIGxvdyBSMg0KICAgICogT3V0bGllcnMgYXJlbuKAmXQgYWx3YXlzIG1pc3Rha2VzDQogICAgKiBTdGF0aXN0aWNhbCBzaWduaWZpY2FuY2UgJFxuZXEkIGJpb2xvZ2ljYWwgc2lnbmlmaWNhbmNlDQoqIElzIHRoZSBtb2RlbCBhcHByb3ByaWF0ZSBmb3IgdGhlIHF1ZXN0aW9uPw0KKiBDYW4gbXkgZXhwZXJpbWVudCBhY3R1YWxseSB0ZXN0IG15IGh5cG90aGVzaXM/DQoqICoqX05ldmVyXyBkZWxldGUgb2JzZXJ2YXRpb25zIHRvIGZvcmNlIGEgYmV0dGVyIG1vZGVsIGZpdCBvciBmaXQgYXNzdW1wdGlvbnMqKg==</div>
<footer>
	    		<ul>
	    		    <li><i class="fas fa-home"></i><a href="https://jacintakongresearch.wordpress.com"> Jacinta D. Kong</a></li>
	        		<li><a class="fas fa-envelope" href="mailto:kongj@tcd.ie"></a></li>
	        		<li><a class="fab fa-twitter" href="https://twitter.com/jacintakong"></a></li>
				</ul>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("biostats-GLM3.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
